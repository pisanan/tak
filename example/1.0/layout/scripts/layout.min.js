var Layout=function(){var p="layouts/layout/img/";var i="layouts/layout/css/";var h=App.getResponsiveBreakpoint("md");var f=[];var g=[];var b=function(){var u=$(".page-content");var s=$(".page-innercontent");var t=$(".page-bar");var v=t.outerHeight();var r=u.innerHeight();s.css("min-height",r-v)};var d=function(){var w=$(".page-content");var x=$(".page-sidebar");var t=$("body");var s;if(t.hasClass("page-footer-fixed")===true&&t.hasClass("page-sidebar-fixed")===false){var y=App.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();var r=x.outerHeight();if(r>y){y=r+$(".page-footer").outerHeight()}console.log("available_height"+y);if(w.height()<y){w.css("min-height",y)}}else{if(t.hasClass("page-sidebar-fixed")){s=k();if(t.hasClass("page-footer-fixed")===false){s=s-$(".page-footer").outerHeight()}}else{var u=$(".page-header").outerHeight();var v=$(".page-footer").outerHeight();if(App.getViewPort().width<h){s=App.getViewPort().height-u-v}else{s=x.height()+20}if((s+u+v)<=App.getViewPort().height){s=App.getViewPort().height-u-v}}console.log("height"+s);w.css("min-height",s);w.css("max-height",s)}b()};var a=function(x,v,u){var t=location.hash.toLowerCase();var w=$(".page-sidebar-menu");if(x==="click"||x==="set"){v=$(v)}else{if(x==="match"){w.find("li > a").each(function(){var y=$(this).attr("ui-sref");if(u&&y){if(u.is(y)){v=$(this);return}}else{var z=$(this).attr("href");if(z){z=z.toLowerCase();if(z.length>1&&t.substr(1,z.length-1)==z.substr(1)){v=$(this);return}}}})}}if(!v||v.size()==0){return}if(v.attr("href")=="javascript:;"||v.attr("ui-sref")=="javascript:;"||v.attr("href")=="#"||v.attr("ui-sref")=="#"){return}var r=parseInt(w.data("slide-speed"));var s=w.data("keep-expanded");if(w.hasClass("page-sidebar-menu-hover-submenu")===false){w.find("li.nav-item.open").each(function(){var y=false;$(this).find("li").each(function(){var z=$(this).attr("ui-sref");if(u&&z){if(u.is(z)){y=true;return}}else{if($(this).find(" > a").attr("href")===v.attr("href")){y=true;return}}});if(y===true){return}$(this).removeClass("open");$(this).find("> a > .arrow.open").removeClass("open");$(this).find("> .sub-menu").slideUp()})}else{w.find("li.open").removeClass("open")}w.find("li.active").removeClass("active");w.find("li > a > .selected").remove();v.parents("li").each(function(){$(this).addClass("active");$(this).find("> a > span.arrow").addClass("open");if($(this).parent("ul.page-sidebar-menu").size()===1){$(this).find("> a").append('<span class="selected"></span>')}if($(this).children("ul.sub-menu").size()===1){$(this).addClass("open")}});if(x==="click"){if(App.getViewPort().width<h&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}}};var q=function(){$(".page-sidebar-mobile-offcanvas .responsive-toggler").click(function(r){$("body").toggleClass("page-sidebar-mobile-offcanvas-open");r.preventDefault();r.stopPropagation()});if($("body").hasClass("page-sidebar-mobile-offcanvas")){$(document).on("click",function(r){if($("body").hasClass("page-sidebar-mobile-offcanvas-open")){if($(r.target).closest(".page-sidebar-mobile-offcanvas .responsive-toggler").length===0&&$(r.target).closest(".page-sidebar-wrapper").length===0){$("body").removeClass("page-sidebar-mobile-offcanvas-open");r.preventDefault();r.stopPropagation()}}})}$(".page-sidebar-menu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(y){var x=$(this).closest(".nav-item").children(".nav-link");if(App.getViewPort().width>=h&&!$(".page-sidebar-menu").attr("data-initialized")&&$("body").hasClass("page-sidebar-closed")&&x.parent("li").parent(".page-sidebar-menu").size()===1){return}var s=x.next().hasClass("sub-menu");if(App.getViewPort().width>=h&&x.parents(".page-sidebar-menu-hover-submenu").size()===1){return}if(s===false){if(App.getViewPort().width<h&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}return}var B=x.parent().parent();var z=x;var t=$(".page-sidebar-menu");var r=x.next();var A=t.data("auto-scroll");var v=parseInt(t.data("slide-speed"));var u=t.data("keep-expanded");if(!u){B.children("li.open").children("a").children(".arrow").removeClass("open");B.children("li.open").children(".sub-menu:not(.always-open)").slideUp(v);B.children("li.open").removeClass("open")}var w=-200;if(r.is(":visible")){$(".arrow",z).removeClass("open");z.parent().removeClass("open");r.slideUp(v,function(){if(A===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){t.slimScroll({scrollTo:(z.position()).top})}else{App.scrollTo(z,w)}}d()})}else{if(s){$(".arrow",z).addClass("open");z.parent().addClass("open");r.slideDown(v,function(){if(A===true&&$("body").hasClass("page-sidebar-closed")===false){if($("body").hasClass("page-sidebar-fixed")){t.slimScroll({scrollTo:(z.position()).top})}else{App.scrollTo(z,w)}}d()})}}y.preventDefault()});if(App.isAngularJsApp()){$(".page-sidebar-menu li > a").on("click",function(r){if(App.getViewPort().width<h&&$(this).next().hasClass("sub-menu")===false){$(".page-header .responsive-toggler").click()}})}$(".page-sidebar").on("click"," li > a.ajaxify",function(t){t.preventDefault();App.scrollTop();var r=$(this).attr("href");var s=$(".page-sidebar ul");s.children("li.active").removeClass("active");s.children("arrow.open").removeClass("open");$(this).parents("li").each(function(){$(this).addClass("active");$(this).children("a > span.arrow").addClass("open")});$(this).parents("li").addClass("active");if(App.getViewPort().width<h&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}Layout.loadAjaxContent(r,$(this))});$(".page-content").on("click",".ajaxify",function(s){s.preventDefault();App.scrollTop();var r=$(this).attr("href");if(App.getViewPort().width<h&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}Layout.loadAjaxContent(r)});$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()});c();$(".page-sidebar").on("click",".sidebar-search .remove",function(r){r.preventDefault();$(".sidebar-search").removeClass("open")});$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(r){if(r.which==13){$(".sidebar-search").submit();return false}});$(".sidebar-search .submit").on("click",function(r){r.preventDefault();if($("body").hasClass("page-sidebar-closed")){if($(".sidebar-search").hasClass("open")===false){if($(".page-sidebar-fixed").size()===1){$(".page-sidebar .sidebar-toggler").click()}$(".sidebar-search").addClass("open")}else{$(".sidebar-search").submit()}}else{$(".sidebar-search").submit()}});if($(".sidebar-search").size()!==0){$(".sidebar-search .input-group").on("click",function(r){r.stopPropagation()});$("body").on("click",function(){if($(".sidebar-search").hasClass("open")){$(".sidebar-search").removeClass("open")}})}};var k=function(){var r=App.getViewPort().height-$(".page-header").outerHeight(true);if($("body").hasClass("page-footer-fixed")){r=r-$(".page-footer").outerHeight()}return r};var m=function(){var r=$(".page-sidebar-menu");d();if($(".page-sidebar-fixed").size()===0){App.destroySlimScroll(r);return}if(App.getViewPort().width>=h&&!$("body").hasClass("page-sidebar-menu-not-fixed")){r.attr("data-height",k());App.destroySlimScroll(r);App.initSlimScroll(r);d()}};var c=function(){if($("body").hasClass("page-sidebar-fixed")){$(".page-sidebar").on("mouseenter",function(){if($("body").hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}}).on("mouseleave",function(){if($("body").hasClass("page-sidebar-closed")){$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")}})}};var e=function(){$("body").on("click",".sidebar-toggler",function(u){var r=$("body");var t=$(".page-sidebar");var s=$(".page-sidebar-menu");$(".sidebar-search",t).removeClass("open");if(r.hasClass("page-sidebar-closed")){r.removeClass("page-sidebar-closed");s.removeClass("page-sidebar-menu-closed");if(Cookies){Cookies.set("sidebar_closed","0")}}else{r.addClass("page-sidebar-closed");s.addClass("page-sidebar-menu-closed");if(r.hasClass("page-sidebar-fixed")){s.trigger("mouseleave")}if(Cookies){Cookies.set("sidebar_closed","1")}}$(window).trigger("resize")})};var n=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(s){s.preventDefault();var t=$(".hor-menu .nav");var r=t.find("li.current");$("li.active",r).removeClass("active");$(".selected",r).remove();var u=$(this).parents("li").last();u.addClass("current");u.find("a:first").append('<span class="selected"></span>')});$(".page-header").on("click",".search-form",function(r){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(s){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(r){if(r.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(r){r.preventDefault();r.stopPropagation();$(this).closest(".search-form").submit()});$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(r){r.stopPropagation()})};var l=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){d()})};var j=function(){var s=300;var r=500;if(navigator.userAgent.match(/iPhone|iPad|iPod/i)){$(window).bind("touchend touchcancel touchleave",function(t){if($(this).scrollTop()>s){$(".scroll-to-top").fadeIn(r)}else{$(".scroll-to-top").fadeOut(r)}})}else{$(window).scroll(function(){if($(this).scrollTop()>s){$(".scroll-to-top").fadeIn(r)}else{$(".scroll-to-top").fadeOut(r)}})}$(".scroll-to-top").click(function(t){t.preventDefault();$("html, body").animate({scrollTop:0},r);return false})};var o=function(){$(".full-height-content").each(function(){var s=$(this);var r;r=App.getViewPort().height-$(".page-header").outerHeight(true)-$(".page-footer").outerHeight(true)-$(".page-title").outerHeight(true)-$(".page-bar").outerHeight(true);if(s.hasClass("portlet")){var t=s.find(".portlet-body");App.destroySlimScroll(t.find(".full-height-content-body"));r=r-s.find(".portlet-title").outerHeight(true)-parseInt(s.find(".portlet-body").css("padding-top"))-parseInt(s.find(".portlet-body").css("padding-bottom"))-5;if(App.getViewPort().width>=h&&s.hasClass("full-height-content-scrollable")){r=r-35;t.find(".full-height-content-body").css("height",r);App.initSlimScroll(t.find(".full-height-content-body"))}else{t.css("min-height",r)}}else{App.destroySlimScroll(s.find(".full-height-content-body"));if(App.getViewPort().width>=h&&s.hasClass("full-height-content-scrollable")){r=r-35;s.find(".full-height-content-body").css("height",r);App.initSlimScroll(s.find(".full-height-content-body"))}else{s.css("min-height",r)}}})};return{initHeader:function(){n()},setSidebarMenuActiveLink:function(s,r){a(s,r,null)},setAngularJsSidebarMenuActiveLink:function(t,s,r){a(t,s,r)},initSidebar:function(r){m();q();e();if(App.isAngularJsApp()){a("match",null,r)}App.addResizeHandler(m)},initContent:function(){o();l();App.addResizeHandler(d);App.addResizeHandler(o)},initFooter:function(){j()},init:function(){this.initHeader();this.initSidebar(null);this.initContent();this.initFooter()},loadAjaxContent:function(s,r){var t=$(".page-content .page-content-body");App.startPageLoading({animate:true});$.ajax({type:"GET",cache:false,url:s,dataType:"html",success:function(v){App.stopPageLoading();t.html(v);for(var u=0;u<f.length;u++){f[u].call(v)}if(r.size()>0&&r.parents("li.open").size()===0){$(".page-sidebar-menu > li.open > a").click()}Layout.fixContentHeight();App.initAjax()},error:function(w,u,x){App.stopPageLoading();t.html("<h4>Could not load the requested content.</h4>");for(var v=0;v<g.length;v++){g[v].call(w)}}})},addAjaxContentSuccessCallback:function(r){f.push(r)},addAjaxContentErrorCallback:function(r){g.push(r)},fixContentHeight:function(){d()},initFixedSidebarHoverEffect:function(){c()},initFixedSidebar:function(){m()},getLayoutImgPath:function(){return App.getAssetsPath()+p},getLayoutCssPath:function(){return App.getAssetsPath()+i}}}();if(App.isAngularJsApp()===false){jQuery(document).ready(function(){Layout.init()})};
/**
 * 所有对象基类
 * *///jq元素容器
//模板过滤器
/**
 * 服务管理中心
 * *///包装器
/**
 * 容器控件对象绑定扩展
 * *//**
 * 模板对象基类
 * *//**
 * 模板对象基类
 * *//**
 * 视图控件
 * *//**
 * 视图容器控件
 * *//**
 * 视图容器控件
 * *//**
 * 代理方法
 * *//**
 * 树型行控件
 * *//**
 * 容器控件
 * *///包装器
/**
 * 模板加载器
 * *//**
 * 容器路径事件处理绑定
 * *//**
 * 包装配置扩展
 * */
var tak={logErr:function(b,c){c?console.error(b+"  \u9519\u8bef\u6d88\u606f:"+c+"\r\n\u8c03\u7528\u5806\u6808\uff1a"+c.stack):console.error(b)},xhrRequest:function(b,c,d){2==arguments.length&&(d=c,c=null);d||(d={});var e=null,e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");e.open(d.method,b,!0);if(tak.iObj(d.header))for(var f in d.header)e.setRequestHeader(f,d.header[f]);tak.iNum(d.timeout)&&0<=d.timeout?e.timeout=d.timeout:e.timeout=15E3;var g;g=tak.hStr(d.respType)?d.respType:"";e.responseType=g;e.onload=function(b){200<=e.status&&300>e.status||304==e.status?d.success&&d.success.call(d.on,"text"==g?e.responseText:"document"==g?e.responseXML:e.response,d.token):d.err&&d.err.call(d.on,e.status,"\u670d\u52a1\u5668\u54cd\u5e94\u5931\u8d25",d.token)};e.onprogress=function(b){d.dprogress&&d.dProgress.call(d.on,b.loaded/b.total,d.token)};e.upload.onprogress=function(b){d.dprogress&&d.uProgress.call(d.on,b.loaded/b.total,d.token)};e.ontimeout=function(b){d.err&&d.err.call(d.on,"9997","\u8bf7\u6c42\u5904\u7406\u8d85\u65f6",d.token)};e.onerror=function(b){d.err&&d.err.call(d.on,"9998","\u8bf7\u6c42\u5904\u7406\u5931\u8d25",d.token)};e.onreadystatechange=function(){d.stateChange&&d.stateChange.call(d.on,e.readyState,d.token)};try{e.send(c)}catch(h){d.err&&d.err.call(d.on,"9999","\u8bf7\u6c42\u53d1\u9001\u5931\u8d25\uff0c\u8bf7\u6c42\u68c0\u67e5\u672c\u5730\u7f51\u7edc\u3002",d.token)}},createFun:function(b,c,d){try{return 2==arguments.length?(d=c,c=void 0):1==arguments.length&&(d=b,c=void 0,b=""),new Function(c,d)}catch(e){tak.logErr("\u81ea\u5b9a\u4e49\u51fd\u6570\u521b\u5efa\u5931\u8d25 ,\u51fd\u6570\u540d\u79f0:"+b,e)}},splStrSp:function(b){return b.trim().split(/\s+/)},splStrDot:function(b){return b.trim().split(/\.+/)},gfn:function(b){return b.name||b.toString().match(/function\s*([^(]*)\(/)[1]},gtn:function(b){b=Object.prototype.toString.call(b);return b.substr(8,b.length-9)},gstn:function(b){b=Object.prototype.toString.call(b);b=b.substr(8,b.length-9);switch(b){case "Function":return"fun";case "String":return"str";case "Number":return"num";case "Boolean":return"bool";default:return b}},ckT:function(b,c){return tak.gtn(b)==c},ckTN:function(b,c){return tak.iObj(b)?b instanceof c:tak.iFun(b)?b.prototype instanceof c||b==c:!1},iObj:function(b){return"[object Object]"==Object.prototype.toString.call(b)},iFun:function(b){return"[object Function]"==Object.prototype.toString.call(b)},iAry:function(b){return"[object Array]"==Object.prototype.toString.call(b)},iMap:function(b){return"[object Map]"==Object.prototype.toString.call(b)},iStr:function(b){return"[object String]"==Object.prototype.toString.call(b)},iNum:function(b){return"[object Number]"==Object.prototype.toString.call(b)},iBool:function(b){return"[object Boolean]"==Object.prototype.toString.call(b)},hStr:function(b){return tak.iStr(b)&&0<b.trim().length},eStr:function(b){return tak.iStr(b)&&0==b.trim().length},strJoin:function(b,c,d){return tak.hStr(b)&&tak.hStr(c)?b+d+c:tak.hStr(b)?b:c},hAry:function(b){return tak.iAry(b)&&0<b.length},eAry:function(b){return tak.iAry(b)&&0==b.length},eachAry:function(b,c,d,e){if(tak.iFun(d))if(tak.iAry(c))if(1==e)for(e=c.length-1;0<=e;e--)d.call(b,c[e]);else for(e=0;e<c.length;e++)d.call(b,c[e]);else isNull(c)||d.call(b,c)},copy:function(b){if(isNull(b))return b;var c;c=tak.gtn(b);if("Object"==c){if(tak.ckTN(b,takObj))return b;c={};for(var d in b)c[d]=tak.copy(b[d])}else if("Array"==c)for(c=[],d=0;d<b.length;d++)c.push(tak.copy(b[d]));else if("Map"==c)for(d in c=new Map,b)c.set(tak.copy(d[0]),tak.copy(d[1]));else c=b;return c},genPro:function(b,c,d,e){var f;f=tak.iFun(d)?d.call(b):d;Object.defineProperty(b,c,{configurable:!0,enumerable:!0,get:function(){return f},set:function(b){void 0===b&&(b=tak.iFun(d)?d.call(this):d);if(b!=f){var c=f;f=b;tak.iFun(e)&&0==e.call(this,c,b)&&(f=c)}}})},defTmp:function(b,c){if(isNull(b)||!c)return b;if(!tak.iObj(b)||void 0===b[c]){var d={};d[c]=b;b=d}return b},unTmp:function(b,c){if(!b)return c;if(!c)return b;var d=tak.gtn(b),e=tak.gtn(c);switch(d){case "Object":switch(e){case "Object":b=tak.copy(b);for(var f in c)b[f]=tak.unTmp(b[f],c[f]);return b;case "Array":return c.push(b),c;default:return c}case "Array":switch(e){case "Object":return b=tak.copy(b),b.push(c),b;case "Array":return b=b.concat(c);default:return c}default:switch(e){case "Object":case "Array":return c;default:return c}}},plgs:{},getPlg:function(b,c){var d=tak.plgs[c];d&&d.type&&!tak.ckTN(b,d.type)&&(d=null);if(d)return d.pType},uuid:function(){for(var b=[],c=0;36>c;c++)b[c]="0123456789abcdef"[Math.floor(16*Math.random())];b[14]="4";b[19]="0123456789abcdef"[b[19]&3|8];b[8]=b[13]=b[18]=b[23]="-";return b.join("")},jQValr:function(b){var c,d=b[0].tagName;if(tak.hStr(d))switch(d.toLowerCase()){case "input":switch(b.attr("type").toLowerCase()){case "checkbox":case "radio":c=void 0==b.attr("checked")?!0:!1;break;default:c=b.val()}break;case "select":case "textarea":c=b.val();break;default:c=b.html()}return c},jQValw:function(b,c){var d=c[0].tagName;isNull(b)&&(b="");if(tak.hStr(d))switch(d.toLowerCase()){case "input":switch(c.attr("type").toLowerCase()){case "checkbox":case "radio":1==b?c.attr("checked","checked"):c.removeAttr("checked");break;default:c.val(b)}break;case "select":case "textarea":c.val(b);break;default:c.html(b)}},jQAtt:function(b,c,d){isNull(d)?b.removeAttr(c):b.attr(c,d)},jQEnable:function(b,c){var d=c[0].tagName;if(tak.hStr(d))switch(d.toLowerCase()){case "a":case "button":b?(tak.jQAtt(c,"disabled"),c.removeClass("disable")):(tak.jQAtt(c,"disabled","true"),c.addClass("disable"));break;case "textarea":case "input":b?(tak.jQAtt(c,"readonly"),c.removeClass("disable")):(tak.jQAtt(c,"readonly","true"),c.addClass("disable"));break;default:b?tak.jQAtt(c,"disabled"):tak.jQAtt(c,"disabled","true")}}};function isNull(b){return void 0==b||null==b}function defCls(b,c,d){var e=b.prototype.__proto__.constructor.name;if(!isNull(e)&&"Object"!=e)throw Error(b.prototype.constructor.name+"\u5bf9\u8c61\u7ee7\u627f\u5b9a\u4e49\u91cd\u590d\u3002");if(tak.iFun(b)&&(2==arguments.length&&(d=c,c=null),tak.iFun(c)&&(b.prototype=new c,b.prototype.constructor=b),tak.iObj(d)))for(var f in d)b.prototype[f]=d[f]}function defPlg(b,c,d,e){tak.ckTN(c,takTmpObj)&&4==arguments.length&&(tak.hStr(d)&&(d={en:d}),tak.iObj(d)&&(defCls(b,c,e),1==d.single&&(d.obj=new b,d.obj.init()),tak.hStr(d.en)&&(d.pType=b,tak.plgs[d.en]=d)))}function defSvr(b,c,d){var e=c.prototype.__proto__.constructor.name;if(!isNull(e)&&"Object"!=e)throw Error(c.prototype.constructor.name+"\u5bf9\u8c61\u7ee7\u627f\u5b9a\u4e49\u91cd\u590d\u3002");if(tak.iFun(c)){if(tak.iObj(d))for(var f in d)c.prototype[f]=d[f];tak.hStr(b)&&$.takApp.setUpService(b,new c)}}function takObj(){}defCls(takObj,{init:function(b,c){tak.genPro(this,"id",c,function(){return!1});tak.genPro(this,"event",function(){return new takEvent(this)},function(){return!1});tak.ckTN(b,takObj)||(b=null);tak.genPro(this,"owner",b,function(b,c){return null==c&&b?(b.removeChild(this),!0):!1});this.owner&&this.owner.addChild(this.id,this);return this},getPage:function(){if(tak.ckTN(this,takPage))return this;if(this.owner)return this.owner.getPage()},getCtrl:function(){if(tak.ckTN(this,takCtrl))return this;if(this.owner)return this.owner.getCtrl()},openPage:function(b){$.takApp.openPage(b)},addChild:function(b,c){if(!isNull(c)){this.childs||(this.childs=[]);if(0<=this.childs.indexOf(c))throw Error("ID\u4e3a "+b+" \u7684\u5bf9\u8c61\u5df2\u7ecf\u662f"+this.id+"\u7684\u5b50\u5bf9\u8c61\u3002");this.childs.push(c);if(tak.hStr(b)){var d="$"+b;if(void 0!=this[d])throw Error("ID\u4e3a "+b+" \u7684\u5bf9\u8c61\u5df2\u7ecf\u5b58\u5728\u3002");this[d]=c;this.doEv("childAdded",{id:b,obj:c})}}},removeChild:function(b){if(b){tak.hStr(b.id)&&delete this["$"+b.id];var c=this.childs.indexOf(b);0<=c&&this.childs.splice(c,1);b&&this.doEv("childRemoved",b)}},eachChild:function(b,c,d){if(tak.iFun(b)&&this.childs){var e,f;tak.iFun(c)&&(d=c,c=null);for(var g=0;g<this.childs.length;g++)e=this.childs[g],d&&0==d.call(this,e)||(f=c?c:e,b.call(f,e))}},hasChild:function(b){return tak.hStr(b)?!isNull(this["$"+b]):!1},getChild:function(b,c,d){if(tak.hStr(b))return(b=this["$"+b])&&tak.iFun(c)&&(d||(d=b),c.call(d,b)),b},findChild:function(b,c,d){if(!tak.hStr(b))return this;b=tak.splStrDot(b);var e,f=this,g=0;for("this"==b[0]&&(g=1);g<b.length;g++)if(e=b[g],f=f.getChild(e),!f)return;f&&tak.iFun(c)&&(d||(d=f),c.call(d,f));return f},bindEv:function(b,c,d){this.event.bindEv(b,c,d)},bindOwnerEv:function(b,c){this.owner&&this.owner.bindEv(b,c,this)},bindChildEv:function(b,c,d){(b=this.getChild(b))&&b.bindEv(c,d,this)},unBindEv:function(b,c,d){this.event.unEvh(b,c,d)},doEv:function(b,c){return this.event.doEve(b,c)},alertError:function(b,c,d){1==arguments.length?(c=b,b=null):tak.iObj(c)?(d=c,c=b,b=null):tak.hStr(b)&&(c=c+"("+b+")");tak.logErr("\u5904\u7406\u5931\u8d25\uff1a"+c,d);this.alert("\u5904\u7406\u5931\u8d25",c,"error")},alert:function(b,c,d){$.takApp.alertF()(d,b,c)},confirm:function(b,c,d,e,f,g){g||(g=this);$.takApp.confirmF()(d,b,c,function(){tak.hStr(e)&&(e=g.getChild(e));tak.iFun(e)&&e.call(g,f)})},showPage:function(b){$.takApp.crtPage(b)},showDialog:function(b,c){$.takApp.showDialog(b,c)},dispose:function(){if(this.disposed)return!1;this.disposed=!0;this.doEv("disposed");this.event.dispose();this.owner=null;var b;if(this.childs)for(var c=0;c<this.childs.length;c++)b=this.childs[c],tak.ckTN(b,takObj)&&1!=b.disposed&&(b.dispose(),c--);for(c in this)"disposed"!=c&&delete this[c];return!0}});function takTmpObj(){}defCls(takTmpObj,takObj,{init:function(b,c){if(!this.inited){this.inited=!0;takObj.prototype.init.call(this,b,c.id);c.func&&this.loadFunc(c.func);if(c&&c.exts)for(var d in c.exts)this.genPlugin(d,c.exts[d]);this.onInit(c);this.doEv("inited",c);return this}},onInit:function(b){tak.iObj(b.refTmps)&&(this.refTmps=b.refTmps)},updTmp:function(b){if(this.refTmps&&tak.hStr(b.fid)){var c=this.refTmps[b.fid];tak.iObj(c)&&tak.hStr(b.rid)&&(c=c[b.rid]);tak.iObj(c)?(b=tak.unTmp(c,b),b.refTmps=c.refTmps):b.refTmps||(b.refTmps=this.refTmps)}return b},loadFunc:function(b){if(tak.iObj(b))for(var c in b)this.addFunc(c,b[c])},addFunc:function(b,c){tak.hStr(c)&&(c={cmd:c});if(tak.hStr(b)){var d;tak.iObj(c)&&tak.hStr(c.cmd)?d=tak.createFun(b,c.args,c.cmd):tak.iFun(c)&&(d=c);d&&this.addChild(b,d);return d}},getFunc:function(b,c,d){if(b=tak.iFun(b)?b:this.getChild(b))return c&&(isNull(d)||tak.iAry(d)||(d=[d]),b.apply(c,d)),b},actChild:function(b,c,d){b=tak.iFun(b)?n:this.getChild(b);c&&!tak.iAry(c)&&(c=[c]);if(tak.iFun(b))for(var e,f=0;f<this.childs.length;f++)e=this.childs[f],d&&!tak.ckTN(e,d)||b.apply(e,c)},getPlugin:function(b,c,d){var e=this.getChild(b);!e&&c&&(e=this.genPlugin(b,d));return e},genPlugin:function(b,c){var d;tak.iObj(c)&&(d=tak.iFun(c.type)?c.type:eval(c.type));d||(d=tak.getPlg(this,b),tak.hStr(d)&&(d=eval(d)));if(tak.iFun(d))return this.__takExts__||(this.__takExts__={}),d=new d,d.init(this,c,b),this.__takExts__[b]=d;tak.logErr("\u65e0\u6cd5\u52a0\u8f7d\u63d2\u4ef6["+b+"],\u627e\u4e0d\u5230\u63d2\u4ef6\u7c7b\u578b\u3002")}});function takMoObj(){}defCls(takMoObj,takTmpObj,{onCrtPro:function(b){tak.genPro(this,"userTag",b.uTag,this.userTagChange);this.pro=tak.copy(b.pro)},init:function(b,c){this.onCrtPro(c);takTmpObj.prototype.init.call(this,b,c,c.id);return this},onInit:function(b){takTmpObj.prototype.onInit.call(this,b);this.pro=b.pro;tak.hStr(b.title)&&this.setName(b.title)},getName:function(){return this.getPro("name")},setName:function(b){this.pro||(this.pro={});this.pro.name=b},userTagChange:function(b,c){this.onUserTagChange(c)},onUserTagChange:function(b){},getPro:function(b){if("id"==b)return this.id;if(this.pro&&tak.hStr(b)&&!isNull(this.pro[b]))return this.pro[b]},getProObj:function(b,c,d,e){var f;this.getPro(b)==c?f=this:this.owner&&(f=this.owner.getProObj(b,c,d,e));f&&tak.iFun(d)&&d.call(this,f);return f},getChildByPV:function(b,c,d,e){var f,g;if(isNull(this.pn)||!tak.hStr(b))g=this.getChild(c,d,e);else if("id"==b)g=this.getChild(c,d,e);else for(var h=0;h<this.childs.length;h++)if(f=this.childs[h],f.getPro(b)==c){g=f;break}g&&tak.iFun(d)&&(e||(e=g),d.call(e,g));return g},checkPro:function(b,c,d){return this.getDPro(b,d)==c},getDPro:function(b,c){var d=this.getPro(b);void 0===d&&(d=c);return d},newObjs:function(b,c){var d=[],e;if(tak.iObj(b))for(var f in b)e=b[f],e.id=f,(e=this.newObj(e,c))&&d.push(e);else if(tak.iAry(b))for(f=0;f<b.length;f++)e=b[f],(e=this.newObj(e,c))&&d.push(e);return d},newObj:function(b,c){if(tak.iObj(b)&&b)try{c&&(b=tak.unTmp(c,b));b=this.updTmp(b);var d;d=tak.iFun(b.type)?b.type:eval(b.type);this.onWillCrt(d,b);if(tak.iFun(d)){var e=new d;e.init(this,b);this.onChildCrt(e);return e}}catch(f){tak.logErr("["+this.id+"]\u521b\u5efa\u5bf9\u8c61["+b.id+"]\u5931\u8d25 type:"+b.type,f)}},onWillCrt:function(b,c){},onChildCrt:function(b){this.doEv("childCreated",b);if(tak.hStr(b.id))this.onCrtChildId(b.id,b)},onCrtChildId:function(b,c){this.doEv("childCreatedId",{path:"this."+b,obj:c});if(this.owner&&tak.hStr(this.id))this.owner.onCrtChildId(this.id+"."+b,c)}});function takColObj(){}defCls(takColObj,takMoObj,{onCrtPro:function(b){takMoObj.prototype.onCrtPro.call(this,b);this.subDef=null},onInit:function(b){takMoObj.prototype.onInit.call(this,b);b.oMap&&(this.oMap=this.initMap(b.oMap));b.subDef&&(this.subDef=tak.unTmp(this.subDef,b.subDef));tak.iObj(b.subs)&&this.genSubs(b.subs)},genSubs:function(b){this.addSubs(this.newObjs(b,this.subDef))},initMap:function(b){return this.newObj(b,{type:"takObjMap"})},getConObj:function(b){if(this.oMap){if(b=this.oMap.getCon(b))return this.findChild(b)}else return this},addTObjs:function(b,c){var d=this.newObjs(b,c);d&&this.addObjs(d);return d},addTObj:function(b,c){c||b==this.subDef||(c=this.subDef);var d=this.newObj(b,c);d&&this.addObj(d);return d},objPkg:function(b){return b},addObjs:function(b){tak.eachAry(this,b,function(b){this.addObj(b)})},addObj:function(b){if(b){var c=this.getConObj(b);c&&c.addSub(b)}},hasSub:function(){return this.subs&&0<this.subs.length},addSubs:function(b,c){b&&tak.eachAry(this,b,this.addSub,c)},addSub:function(b){if(b&&tak.ckTN(b,takMoObj)&&(b=this.objPkg(b))){this.subs||(this.subs=[]);if(0<=this.subs.indexOf(b))return;this.doEv("subWillAdd",b);this.subs.push(b);this.onAdSubed(b);this.doEv("subAdded",b);return!0}return!1},getCount:function(){return this.subs?this.subs.length:0},removeSub:function(b){this.subs&&this.removeSubAt(this.subs.indexOf(b))},getSubByIndex:function(b){if(this.subs&&this.subs.length>b)return this.subs[b]},getSubIndex:function(b){return this.subs.indexOf(b)},removeId:function(b){this.getSub(b,function(b){this.removeSub(b)},this)},removeSubAt:function(b){if(!(0>b||b>=this.subs.length)&&this.subs){var c=this.subs[b];this.subs.splice(b,1);this.onRmSubed(c);0==this.subs.length&&(this.subs=null);this.doEv("subRemoved",c)}},clearSubs:function(b,c){if(this.subs){var d;c||(c=this);for(var e=this.subs;0<e.length;)d=e[0],b&&b.call(c,d),d.parent=null}},onRmSubed:function(b){b.parent=null},onAdSubed:function(b){b.parent=this;if(tak.hStr(b.id))this.onAddSubId(b.id,b)},onAddSubId:function(b,c){this.doEv("subAddedId",{path:"this."+b,obj:c});if(this.parent&&tak.hStr(this.id))this.parent.onAddSubId(this.id+"."+b,c)},eachSub:function(b,c,d){if(this.subs&&tak.iFun(b))for(var e,f,g=0;g<this.subs.length;g++)f=this.subs[g],e=c?c:f,b.call(e,f),d&&f.eachSub(b,c,d)},actSub:function(b,c,d){var e=this.getFunc(b);c&&!tak.iAry(c)&&(c=[c]);if(tak.iFun(e))for(var f,g=0;g<this.subs.length;g++)f=this.subs[g],e.apply(f,c),d&&f.actSub(b,c,d)},getSubPath:function(b,c,d){if(!tak.hStr(b))return this;b=tak.splStrDot(b);var e;d=this;var f=0;for("this"==b[0]&&(f=1);f<b.length;f++)if(e=b[f],d=d.getSub(e),!d)return;d&&tak.iFun(c)&&(to||(to=d),c.call(to,d));return d},getSub:function(b,c,d){var e;if(isNull(b)||""==b)return this;if(this.subs)for(var f,g=0;g<this.subs.length;g++)if(f=this.subs[g],f.id==b){e=f;break}e&&tak.iFun(c)&&c.call(d?d:f,f);return e}});function takObjMap(){}defCls(takObjMap,takTmpObj,{onInit:function(b){takTmpObj.prototype.onInit.call(this,b);this.pn="alias";tak.hStr(b)?this.def=b:tak.iObj(b)&&(b=tak.defTmp(b,"map"),this.def=b.map.def,this.map=b.map,tak.hStr(b.pn)&&(this.pn=b.pn))},getPNCon:function(b){return this.map?this.map[b]:this.def},getCon:function(b){if(tak.iObj(b)){var c;if(this.map){var d;"id"==this.pn?d=b.id:b.pro&&(d=b.pro[this.pn]);d&&(c=this.map[d])}c||(c=this.def);return c}return this.def}});function takEvent(b){this.owner=b}defCls(takEvent,{bindEv:function(b,c,d){tak.iStr(c)&&(c=this.getAct(c));if(tak.iStr(b)&&tak.iFun(c)){tak.iObj(d)||(d=this.owner);this.eves||(this.eves={});this.eves[b]||(this.eves[b]=[]);b=this.eves[b];for(var e,f=0;f<b.length;f++)if(e=b[f],e.t==d&&e.fun==c)return;b.push({fun:c,t:d})}},unEvh:function(b,c,d){if(this.eves)if(tak.iStr(c)&&(c=this.getAct(c)),isNull(d)&&isNull(c)&&tak.hStr(b))delete this.eves[b];else{var e=function(b,c,d){if(b)for(var e,f=0;f<b.length;f++)e=b[f],d&&e.fun!=d||c&&e.t!=c||(b.splice(f,1),f--)};if(tak.hStr(b))e(this.eves[b],d,c);else for(var f in this.eves)e(this.eves[f],d,c)}},doEve:function(b,c){var d=this.getEvhs(b);if(d)for(var e=0;e<d.length;e++)try{if(1!=d[e].t.disposed&&0==d[e].fun.call(d[e].t,this.owner,c))return!1}catch(f){tak.logErr(this.owner.id+"\u4e8b\u4ef6["+b+"]\u6267\u884c\u5931\u8d25",f)}return!0},getEvhs:function(b){if(tak.hStr(b)&&this.eves)return this.eves[b]},dispose:function(){for(var b in this)delete this[b]}});function takFilter(b,c){this.fn="id";this.isSel=!1;b=tak.unTmp({fn:"id",isSel:"0"},tak.defTmp(b,"vals"));tak.hStr(b.vals)?this.vals=[b.vals]:tak.iAry(b.vals)&&(this.vals=b.vals);this.isSel="1"==b.isSel?!0:!1;this.fn=b.fn}defCls(takFilter,{getObjs:function(b){if(!this.vals||0==this.vals.length)return this.isSel?[]:b;var c=[];tak.eachAry(this,b,function(b){this.check(b)&&c.push(b)});return c},check:function(b){if(!b)return!1;if(!this.vals||0==this.vals.length)return this.isSel?!1:!0;var c;"id"==this.fn?c=b[this.fn]:b.pro&&(c=b.pro[this.fn]);b=this.vals.indexOf(c);return this.isSel&&0<=b?!0:!this.isSel&&0>b?!0:!1}});function takCvt(){}defCls(takCvt,takTmpObj,{initVar:function(b){this.loading=!1},onInit:function(b){takTmpObj.prototype.onInit.call(this,b);this.initVar(b);tak.iObj(b.ldOpt)&&(this.ldOpt=b.ldOpt,this.ldOpt.ldOpt=!0);b.lder?this.initLoader(tak.defTmp(b.lder,"param")):tak.iAry(b.opts)?this.setOpts(b.opts):this.setOpts(null)},initLoader:function(b){this.ldSvn="cvtSv";tak.hStr(b.sn)&&(this.ldSvn=b.sn);this.ldSfn="loadOpt";tak.hStr(b.sf)&&(this.ldSfn=b.sf);this.ldParam=b.param;this.loadOpts(this.ldParam,!1,this.setOpts)},setParam:function(b){b&&(this.ldParam=b,this.loadOpts(this.ldParam,!1,this.setOpts))},refrash:function(){this.loadOpts(this.ldParam,!0,this.setOpts)},getLoadingOpt:function(){var b=this.owner.getPro("ldOpt");b?b.ldOpt=!0:b=this.ldOpt;return b},loadOpts:function(b,c,d){if(1!=this.loading){this.setOpts(null);this.loading=!0;var e=$.takApp.getSrv(this.ldSvn);e?(this.owner.doEv("beginLoadOpts"),e.doAct(this.ldSfn,{param:b,isRef:c},function(b,c,e,k){this.loading=!1;this.owner&&!this.owner.disposed&&(b?(d.call(this,c),this.owner.doEv("optsLoaded",c)):this.owner.doEv("optsLoaderr",c))},this)):(this.loading=!1,this.alertError("\u9519\u8bef","\u65e0\u6cd5\u83b7\u53d6\u670d\u52a1\u5bf9\u8c61 \u670d\u52a1\u540d\u79f0:"+this.ldSvn))}},getOpts:function(){return this.opts},setOpts:function(b){this.loading||(b||(b=this.getLoadingOpt()),this.opts=b,this.onOptChange(b))},onOptChange:function(b){this.doEv("optsChange",b)},getVal:function(b){return b},getTxt:function(b){return b}});function FuncCvt(){}defCls(FuncCvt,takCvt,{initVar:function(b){takCvt.prototype.initVar.call(this,b);this.tfn="getTxt";this.vfn="getVal";tak.hStr(b.txtFun)&&(this.tfn=b.txtFun);tak.hStr(b.valFun)&&(this.vfn=b.valFun)},getVal:function(b){var c=this.owner.getFunc(this.vfn);if(c)c.call(this.owner,b,this.opts);else return b},getTxt:function(b){var c=this.owner.getFunc(this.tfn);if(c)c.call(this.owner,b,this.opts);else return b}});function SvCvt(){}defCls(SvCvt,takCvt,{initVar:function(b){takCvt.prototype.initVar.call(this,b);this.sn="converter";this.tfn="getTxt";this.vfn="getVal";tak.hStr(b.txtFun)&&(this.tfn=b.txtFun);tak.hStr(b.valFun)&&(this.vfn=b.valFun)},getVal:function(b){var c=$.takApp.getSrv(this.sn);return c&&tak.iFun(c[this.vfn])?c[this.vfn].call(c,b,this.opts):b},getTxt:function(b){var c=$.takApp.getSrv(this.sn);return c&&tak.iFun(c[this.tfn])?c[this.tfn].call(c,txt,this.opts):b}});function ListCvt(){}defCls(ListCvt,takCvt,{initVar:function(b){takCvt.prototype.initVar.call(this,b);this.valPn="val";this.txtPn="txt";tak.hStr(b.valPn)&&(this.valPn=b.valPn);tak.hStr(b.txtPn)&&(this.txtPn=b.txtPn)},getLoadingOpt:function(){var b=takCvt.prototype.getLoadingOpt.call(this);isNull(b)||tak.iAry(b)||(b=[b]);return b},setOpts:function(b){b&&!tak.iAry(b)&&(b=[b]);if(tak.iAry(b)){for(var c,d=[],e,f=0;f<b.length;f++)c=b[f],tak.hStr(c)?(e={},e[this.valPn]=c,e[this.txtPn]=c,d.push(e)):tak.iObj(c)&&d.push(c);b=d}takCvt.prototype.setOpts.call(this,b)},getVal:function(b){var c=this.getOpt(this.opts,b,this.txtPn);return c?c[this.valPn]:b},getTxt:function(b){var c=this.getOpt(this.opts,b,this.valPn);return c?c[this.txtPn]:b},getOpt:function(b,c,d){tak.hStr(d)||(d=this.valPn);if(tak.iAry(b)){for(var e,f,g=0;g<b.length;g++)if(e=b[g],tak.iObj(e)){if(e[d]==c)return e;e.ldOpt&&(f=e)}return f}}});function treeCvt(){}defCls(treeCvt,ListCvt,{initVar:function(b){ListCvt.prototype.initVar.call(this,b);this.items=[];this.subPn="subs";tak.hStr(b.subPn)&&(this.subPn=b.subPn);"1"==b.lazyLoad&&(this.lazyLoad=!0);this.lazyLoad=!1},setItem:function(b){if(tak.iAry(b)){if(this.itemss)for(var c=0;c<this.items.length;c++)this.items[c].unBindEv(null,null,this);this.items=b;for(c=0;c<b.length;c++)this.bindVEv(b[c]);0<b.length&&this.pnItem(b[0])}else tak.ckTN(b,takView)&&(this.items.push(b),this.bindVEv(b),this.pnItem(b))},bindVEv:function(b){b.bindEv("hValChange",function(b,d){var c=this.items.indexOf(b);0<=c&&c<this.items.length-1&&this.setItOpts(b,d,this.items[c+1])},this)},pnItem:function(b){var c,d,e=this.items.indexOf(b);0<e&&(c=this.items[e-1],d=c.getHVal());this.setItOpts(c,d,b)},subTmp:function(){return{valPn:this.valPn,txtPn:this.txtPn}},onOptChange:function(b){0<this.items.length&&this.setItOpts(null,null,this.items[0]);ListCvt.prototype.onOptChange.call(this,b)},setItOpts:function(b,c,d){var e=this.subTmp();if(b)if(c)if(b=this.getOpt(b.getCvtOpts(),c,this.valPn),this.lazyLoad){d.setCvtOpts(this.getLoadingOpt(),e);c=function(b){d.setCvtOpts(os,e)};var f=this.owner.getFunc("treeCvtSubParam");f?f.call(this.owner,this,b,c):this.loadOpts(b,!1,c)}else b&&d.setCvtOpts(b[this.subPn],e);else d.setCvtOpts(this.getLoadingOpt(),e);else d.setCvtOpts(this.opts,e)},setVal:function(b){if(!this.lazyLoad){var c=this.valPn,d=this.items;this.findOpt(0,this.opts,function(d){return d[c]==b},function(b,f){d[b].setVal(f[c])})}},findOpt:function(b,c,d,e,f){if(tak.iAry(c)&&this.items.length>b)for(var g,h=0;h<c.length;h++){g=c[h];if(d(g))return f&&f(),e(b,g),g;if(this.findOpt(b+1,g[this.subPn],d,e,function(){f&&f();e(b,g)}))return g}}});function takSrvMag(){this.srvs=new Map}defCls(takSrvMag,{addSrv:function(b,c){if(this.srvs.get(b))throw Error("\u670d\u52a1"+b+"\u5df2\u5b58\u5728\uff0c\u8bf7\u52ff\u91cd\u590d\u6ce8\u518c\u3002");var d=new takSrv(b,c);this.srvs.set(b,d)},getSrvBySN:function(b){return this.srvs.get(b)}});function takSrv(b,c){this.name=b;this.srv=c}defCls(takSrv,{getObj:function(){tak.iFun(this.srv)&&(this.srv=new this.srv);return this.srv},doAct:function(b,c,d,e,f){try{tak.iFun(this.srv)&&(this.srv=new this.srv),tak.iFun(this.srv[b],"Function")?this.srv[b].call(this.srv,c,function(b,c,k,p){d.call(e,b,c,k,p,f)}):d.call(e,!1,null,null,"\u670d\u52a1["+this.name+"]\u4e2d\u4e0d\u5b58\u5728\u65b9\u6cd5\uff1a"+b,f)}catch(g){tak.logErr("\u670d\u52a1["+this.name+"]\u6267\u884c["+b+"]\u5931\u8d25",g),d.call(e,!1,null,null,"\u670d\u52a1["+this.name+"]\u6267\u884c["+b+"]\u65f6\u51fa\u9519",f)}}});function takMLoad(){}defCls(takMLoad,takTmpObj,{onInit:function(b){takTmpObj.prototype.onInit.call(this,b);tak.hStr(b.sn)&&(this.sn=b.sn);tak.hStr(b.fn)&&(this.fn=b.fn);tak.hStr(b.lpf)&&(this.lpf=b.lpf);return this},setParam:function(b,c){tak.hStr(this.lpf)?this.param=this.owner.getLoadParam(this.lpf,b):this.param=b;c&&(this.on=c)},doOwnerEv:function(b,c){this.owner&&1!=this.owner.disposed&&this.owner.doEv(b,c)},load:function(b,c){this.setParam(b,c);this.req(!1)},refrash:function(){this.req(!0)},genData:function(b){return{param:this.param,isRef:b}},req:function(b){if(1!=this.loading){this.loading=!0;var c=$.takApp.getSrv(this.sn);if(!c)throw Error("\u65e0\u6cd5\u83b7\u53d6\u670d\u52a1\u5bf9\u8c61 \u670d\u52a1\u540d\u79f0:"+this.sn);var d=this.on;this.doOwnerEv("beginLoadData",{lder:this,on:d});c.doAct(this.fn,this.genData(b),function(b,c,d,h,k){this.loading=!1;this.reqCom(b,c,d,h,k);this.doOwnerEv("endLoadData",{lder:this,isc:b,data:c,code:d,msg:h})},this,d)}},reqCom:function(b,c,d,e,f){if(b){try{tak.iFun(f)?f(c):tak.ckTN(f,takRendObj)&&f.val(c)}catch(g){this.alertError("\u5904\u7406","\u6570\u636e\u5904\u7406\u51fa\u9519",g)}this.doOwnerEv("dataLoaded",{lder:this,val:c})}else this.doOwnerEv("dataloadErr",{lder:this,code:d,msg:e})}});function takCommiter(){}defCls(takCommiter,takMoObj,{doOwnerEv:function(b,c){this.owner&&1!=this.owner.disposed&&this.owner.doEv(b,c)},commit:function(b,c,d,e,f){var g={an:d,data:b};if(1!=this.doing){var h=$.takApp.getSrv(c);if(h){this.doing=!0;var k=this.owner;k&&(k=k.loading("\u6b63\u5728\u63d0\u4ea4\u8bf7\u6c42...",!0));this.doOwnerEv("beginCommit");h.doAct(d,b,function(b,c,d,h,q){this.doing=!1;g.sa=c;g.code=d;g.msg=h;this.doOwnerEv(b?"commited":"commitErr",g);this.doOwnerEv("endCommit");k&&k.hideLoading();b&&tak.iFun(e)&&e.call(f,q,c)},this,b)}else this.alertError("\u8bf7\u6c42","\u65e0\u6cd5\u83b7\u53d6\u670d\u52a1\u5bf9\u8c61 \u670d\u52a1\u540d\u79f0:"+c)}}});function takValider(){}defCls(takValider,{init:function(b,c){this.owner=b;tak.hStr(c)?this.opt={dType:c}:this.opt=c;if(tak.iObj(this.opt))return this.ec="tak-error",c.errCls&&(this.ec=c.errCls),this},valid:function(){var b=this.owner.getHVal();if(!this.opt)return{s:!0,v:b};var c,d;if(tak.hStr(this.opt.cpTo)){var e=this.owner.owner.getChild(this.opt.cpTo);e&&(c=e.getName(),d=e.getHVal())}b=takValidF(b,this.opt,this.owner.getName(),c,d);this.owner.baseJqo&&tak.hStr(this.ec)&&(1!=b.s?this.owner.baseJqo.addClass(this.ec):this.owner.baseJqo.removeClass(this.ec));return b}});function takValidF(b,c,d,e,f){void 0==b&&(b=null);var g,h=c.cpType,k={s:!0,v:b};tak.hStr(c.dType)&&(g=takValidF.prototype[c.dType]);if(tak.hStr(b)&&tak.iFun(g)&&(k=g(k),!k.s))return 0==k.m.indexOf("\u4e3a")?k.m=d+k.m:k.m=d+":\u8bf7\u586b\u5199\u6b63\u786e\u7684"+k.m,k;g="";"1"==c.req&&(g="\u5fc5\u586b",k.s=!isNull(b)&&!tak.eStr(b)&&!tak.eAry(b));tak.hStr(e)&&("-2"==h&&f>=b?(k.s=!1,g=tak.strJoin(g,"\u5fc5\u987b\u5c0f\u4e8e"+e,",\u4e14")):"-1"==h&&f>b?(k.s=!1,g=tak.strJoin(g,"\u5fc5\u987b\u5c0f\u4e8e\u7b49\u4e8e"+e,",\u4e14")):"2"==h&&f<=b?(k.s=!1,g=tak.strJoin(g,"\u5fc5\u987b\u5927\u4e8e"+e,",\u4e14")):"1"==h&&f<b?(k.s=!1,g=tak.strJoin(g,"\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8e"+e,",\u4e14")):f!=b&&(k.s=!1,g=tak.strJoin(g,"\u5fc5\u987b\u7b49\u4e8e"+e,",\u4e14")));tak.hStr(c.pre)&&(g=tak.strJoin(g,"\u4ee5"+c.pre+"\u5f00\u5934","\u4e14"),k.s&&tak.hStr(b)&&(k.s=b>=c.minV));tak.hStr(c.suf)&&(g=tak.strJoin(g,"\u4ee5"+c.suf+"\u7ed3\u5c3e","\u4e14"),k.s&&tak.hStr(b)&&(k.s=b<=c.maxV));tak.hStr(c.minL)&&tak.hStr(c.maxL)?(e=parseInt(c.minL,10),f=parseInt(c.maxL,10),g=e==f?tak.strJoin(g,"\u957f\u5ea6\u4e3a"+e,"\u4e14"):tak.strJoin(g,"\u957f\u5ea6\u4e3a"+e+"\u5230"+f+"\u4e4b\u95f4",",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b.length>=e&&b.length<=f)):tak.hStr(c.minL)?(e=parseInt(c.minL,10),g=tak.strJoin(g,"\u957f\u5ea6\u4e0d\u80fd\u5c0f\u4e8e"+e,",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b.length>=e)):tak.hStr(c.maxL)&&(f=parseInt(c.maxL,10),g=tak.strJoin(g,"\u957f\u5ea6\u4e0d\u80fd\u5927\u4e8e"+f,",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b.length<=f));tak.hStr(c.minV)&&tak.hStr(c.maxV)?(g=tak.strJoin(g,c.minV+"\u5230"+c.maxV+"\u4e4b\u95f4",",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b>=c.minV&&b<=c.maxV)):tak.hStr(c.minV)?(g=tak.strJoin(g,"\u4e0d\u80fd\u5c0f\u4e8e"+c.minV,",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b>=c.minV)):tak.hStr(c.maxV)&&(g=tak.strJoin(g,"\u4e0d\u80fd\u5927\u4e8e"+c.maxV,",\u4e14"),k.s&&tak.hStr(b)&&(k.s=b<=c.maxV));tak.hStr(c.minC)&&tak.hStr(c.maxC)?(e=parseInt(c.minC,10),f=parseInt(c.maxC,10),g=e==f?tak.strJoin(g,"\u5fc5\u987b\u4e3a"+e+"\u6761","\u4e14"):tak.strJoin(g,"\u6700\u5c11"+e+"\u6761,\u6700\u591a"+f+"\u6761",",\u4e14"),k.s&&tak.iAry(b)&&(k.s=b.length>=e&&b.length<=f)):tak.hStr(c.minC)?(e=parseInt(c.minC,10),g=tak.strJoin(g,"\u6700\u5c11"+e+"\u6761",",\u4e14"),k.s&&tak.iAry(b)&&(k.s=b.length>=e)):tak.hStr(c.maxC)&&(f=parseInt(c.maxC,10),g=tak.strJoin(g,"\u6700\u591a"+f+"\u6761",",\u4e14"),k.s&&tak.iAry(b)&&(k.s=b.length<=f));0==k.s&&(tak.hStr(c.msg)?k.m=c.msg:k.m=d+":"+g);return k}takValidF.prototype={require:function(b){b.m="\u5fc5\u586b";b.s=!isNull(b.v)&&!tak.eStr(b.v)&&!tak.eAry(b.v);return b},chars:function(b){b.m="(\u5b57\u6bcd,\u6570\u5b57\u6216\u7279\u6b8a\u5b57\u7b26:_!@#$%^\x26*[]|.\\/)";b.s=/^[\da-zA-Z_!@#$%^&*\[\]|\.\\/:]*$/.test(b.v);return b},"int":function(b){b.m="\u6574\u6570";b.s=/^-?[0-9]+$/.test(b.v);b.v=parseInt(b.v);return b},uInt:function(b){b.m="\u6b63\u6574\u6570";b.s=/^-?[0-9]+$/.test(b.v);b.v=parseInt(b.v);return b},nInt:function(b){b.m="\u8d1f\u6574\u6570";b.s=/^-[0-9]+$/.test(b.v);b.v=parseInt(b.v);return b},number:function(b){b.m="\u6570\u5b57";b.s=/^-?[0-9]+(\.\d+)?$/.test(b.v);b.v=parseFloat(b.v);return b},uNumber:function(b){b.m="\u6b63\u6570";b.s=/^[0-9]+(\.\d+)?$/.test(b.v);b.v=parseFloat(b.v);return b},nNumber:function(b){b.m="\u8d1f\u6570";b.s=/^-?[0-9]+(\.\d+)?$/.test(b.v);b.v=parseFloat(b.v);return b},phone:function(b){b.m="\u7535\u8bdd\u53f7\u7801(\u5ea7\u673a\u53f7(\u533a\u53f7\u7528-\u9694\u5f00)\uff0c1\u5f00\u5934\u768411\u4f4d\u624b\u673a\u53f7\u6216400\u5f00\u5934\u768410\u4f4d\u5ba2\u670d\u53f7)";b.s=/(^(\d{3,4}-)?\d{7,8})|(1\d{10})|(400\d{7})$/.test(b.v);return b},mobile:function(b){b.m="\u624b\u673a\u53f7(1\u5f00\u5934\u768411\u4f4d\u6570\u5b57)";b.s=/^1\d{10}$/.test(v);return b},email:function(b){b.m="\u90ae\u7bb1\u5730\u5740";b.s=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(b.v);return b},date:function(b){b.m="\u65e5\u671f(\u5e74-\u6708-\u65e5)";b.s=/^[0-2]?\d{3}-((0?[1-9])|(1[0-2]))-((0?[1-9])|((1|2)[0-9])|30|31)$/.test(b.v);return b},time:function(b){b.m="\u65f6\u95f4(\u65f6:\u5206:\u79d2)";b.s=/^(([0-1]?[0-9])|(2[0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/.test(b.v);return b},dateTime:function(b){b.m="\u65e5\u671f\u65f6\u95f4(\u5e74-\u6708-\u65e5 \u65f6:\u5206:\u79d2)";b.s=/^[0-2]?\d{3}-((0?[1-9])|(1[0-2]))-((0?[1-9])|((1|2)[0-9])|30|31)\s(([0-1]?[0-9])|(2[0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/.test(b.v);return b},bankCard:function(b){b.m="\u94f6\u884c\u5361\u53f7";var c=b.v;if(!/^[0-9]*$/.test(c))return b.s=!1,b;for(var d,e,f=c.length-1,g=e=0;g<f;g++)d=parseInt(c.substr(g,1)),0==g%2&&(d*=2,d=d/10+d%10),e+=d;e%=10;0==e&&(b.s="0"==c.substr(f,1));elser.s=c.substr(f,1)==(10-e).toString();return b},bankAccount:function(b){b.m="\u94f6\u884c\u8d26\u53f7";var c=b.v,d=c.length;if(8>d)b.s=!1;else if(!/^[0-9]*$/.test(c))b.s=!1;else if(15>d)return b.s=!0,b;return takValidF.prototype.bankCard(b)},zhIDCard18:function(b){b.m="\u8eab\u4efd\u8bc1\u53f7";var c=b.v;if(18!=c.length||!/^[0-9]*$/.test(c.substr(0,17)))return b.s=!1,b;for(var d=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],e=0,f=0;17>f;f++)e+=parseInt(c.substr(f,1))*d[f];b.s=c.substr(17,1)=="10X98765432".split("")[e%11];return b},zhIDCard:function(b){b.m="\u8eab\u4efd\u8bc1\u53f7";var c=b.v;return 15==c.length?(b.s=/^[0-9]*$/.test(c),b):takValidF.prototype.zhIDCard18(b)}};function takBindM(b){if(this.owner=b)this.val=b.val()}defCls(takBindM,{getVal:function(b){if(this.bds){tak.iObj(b)||(b={});for(var c=0;c<this.bds.length;c++)b=this.bds[c].getData(b)}return b},setVal:function(b){this.val=b;this.setData(b)},addObj:function(b,c){if(c){var d=new takBindp(c,b);this.bds||(this.bds=[]);this.bds.push(d);var e=this.val;e&&d.setData(e)}},remove:function(b){if(this.bds)for(var c=0;c<this.bds.length;c++)this.bds[c].owner==b&&(this.bds.splice(c,1),c--)},setData:function(b){if(this.bds)for(var c=0;c<this.bds.length;c++)this.bds[c].setData(b)}});function takBindp(b,c){this.owner=b;this.pn=c}defCls(takBindp,{setData:function(b){this.owner.bindOn()&&(b=this.getVal(b,this.pn),this.owner.reVal(b))},getData:function(b){if(this.owner.bindOn()&&tak.hStr(this.pn)){var c=this.owner.getVal();isNull(c)||(b=this.setVal(b,c,this.pn))}return b},getVal:function(b,c){if(!tak.hStr(c))return null;var d=tak.splStrDot(c),e,f=b,g=0;for("this"==d[0]&&(g=1);g<d.length;g++)if(e=d[g],0!=e.length){if(!tak.iObj(f))return;f=f[e];if(!f)return}return f},setVal:function(b,c,d){if(!tak.hStr(d))return null;if("this"==d)return c;d=tak.splStrDot(d);tak.iObj(b)||(b={});var e,f=b,g=0;for("this"==d[0]&&(g=1);g<d.length-1;g++)e=d[g],tak.iObj(f)||(f[e]={}),f=f[e];f[d[g]]=c;return b}});function takRendObj(){}defCls(takRendObj,takColObj,{onCrtPro:function(b){takColObj.prototype.onCrtPro.call(this,b);tak.genPro(this,"parent",null,this.paChange);tak.genPro(this,"visible","0"==b.visible?!1:!0,this.visibleChange);tak.genPro(this,"enable","0"==b.enable?!1:!0,this.enableChange);this.ldReqCount=0;this.rended=this.loadingOn=!1;this.baseV=null;this.valBindOn=!0},showPage:function(b){$.takApp.showPage(b,this)},bindOn:function(b){tak.iBool(b)&&(this.valBindOn=b);return this.valBindOn},onInit:function(b){takColObj.prototype.onInit.call(this,b);tak.hStr(b.bind)&&this.setBind(b.bind);b.loadingOn&&(this.loadingOn="0"==b.loadingOn?!1:!0);isNull(b.val)||(this.__val__=b.val);b.cvt&&this.setDCvt(this.newObj(tak.unTmp(this.defCvtTmp(),b.cvt)));this.opt=b},setDCvt:function(b){this.dCvt=b;var c;this.dCvt&&(c=this.dCvt.getOpts(),this.dCvt.bindEv("optsChange",function(b,c){this.onCvtOptsChange(c)},this));this.onCvtOptsChange(c)},onCvtOptsChange:function(b){this.setVal(this.__val__)},loadTmp:function(){if(this.opt){var b=this.opt;delete this.opt;this.onLoad(b);this.doEv("loaded")}},onLoad:function(b){},defCvtTmp:function(){return{type:"ListCvt"}},setBind:function(b){tak.ckTN(this.owner,takRendObj)&&(this.owner.rmBind(this),tak.hStr(b)&&this.owner.addBind(this,b))},enableChange:function(b,c){var d=tak.iBool(c);0!=d&&(this.aplEnable(this.getRealEnable()),this.doEv("enableChanged",c));return d},addBind:function(b,c){this.bindm||(this.bindm=new takBindM(this));this.bindm.addObj(c,b)},rmBind:function(b){this.bindm&&this.bindm.remove(b)},visibleChange:function(b,c){var d=tak.iBool(c);0!=d&&(this.onVisibleChange(c),this.doEv("visibleChanged",c));return d},bindPaEv:function(b,c){this.parent&&this.parent.bindEv(b,c,this)},paChange:function(b,c){var d=this.parentWillchange(b,c);0!=d&&(tak.ckTN(b,takColObj)&&b.removeSub(this),1!=this.disposed&&(this.onParentChanged(c),this.doEv("parentChanged",c)));return d},parentWillchange:function(b,c){return isNull(c)||tak.ckTN(c,takRendObj)},onVisibleChange:function(b){},onParentChanged:function(b){},loading:function(b,c){if(this.loadingOn)return this.ldReqCount++,this.baseV&&this.baseV.rended&&(1<this.ldReqCount?(this.enable=!1,$.takApp.showMsg(this.baseV.baseJqo,b)):$.takApp.loading(this.baseV.baseJqo,b,c)),this},showMsg:function(b){this.rended&&0<this.ldReqCount&&$.takApp.showMsg(this.baseV.baseJqo,b)},hideLoading:function(){0<this.ldReqCount&&(this.ldReqCount--,this.rended&&0==this.ldReqCount&&(this.enable=!0,$.takApp.loaded(this.baseV.baseJqo)))},rend:function(b){this.doRend(b)&&(this.loadTmp(),this.onRended())},doRend:function(b){return!1},append:function(b){},onRended:function(){this.rendSubs();this.rendVal();this.aplEnable(this.getRealEnable());this.doEv("rended")},rendVal:function(){isNull(this.__val__)&&(this.__val__=this.getPro("dVal"));return this.__val__?(this.reVal(),!0):!1},rendSubs:function(){tak.eachAry(this,this.subs,function(b){this.rendSub(b)})},onRmSubed:function(b){takColObj.prototype.onRmSubed.call(this,b);b.remove()},onAdSubed:function(b){takColObj.prototype.onAdSubed.call(this,b);this.rended&&this.rendSub(b)},rendSub:function(b){},aplEnable:function(b){this.eachSub(function(c){c.aplEnable(b)})},getRealEnable:function(){return this.enable?this.parent?this.enable&&this.parent.getRealEnable():this.enable:this.enable},val:function(b){if(1==arguments.length)this.__val__!=b&&(this.reVal(b),this.doEv("valChanged",b));else return this.__val__},reVal:function(b){1==arguments.length&&(this.__val__=b);this.rended&&this.setVal(this.__val__)},getVal:function(){if(this.bindm){var b=this.getHVal();isNull(b)&&(b=this.__val__);return this.bindm.getVal(b)}return this.getHVal()},setVal:function(b){this.bindm&&this.bindm.setVal(b);this.setHVal(b);this.doHValChange()},getHVal:function(){return this.__val__},setHVal:function(b){},doHValChange:function(){this.doEv("hValChange",this.getHVal())},remove:function(){this.rended&&(this.rended=!1,this.parent=null,1!=this.disposed&&(this.onRemove(),this.doEv("removed")))},onRemove:function(){},dispose:function(){this.remove();this.setBind(null);takColObj.prototype.dispose.call(this)}});function HtmlV(){}defCls(HtmlV,takRendObj,{onCrtPro:function(b){takRendObj.prototype.onCrtPro.call(this,b);this.tag="div"},onInit:function(b){takRendObj.prototype.onInit.call(this,b);this.baseV=this;b.rMap&&(this.rMap=this.initMap(b.rMap));tak.hStr(b.tag)&&(this.tag=b.tag);this.setVAtt($.takApp.getVAtts(b.type));b.vAtt&&this.setVAtt({def:tak.defTmp(b.vAtt,"base")});tak.iAry(b.scene)?this.scene=b.scene:tak.hStr(b.scene)&&(this.scene=[b.scene])},onLoad:function(b){takRendObj.prototype.onLoad.call(this,b);b.jEven&&this.initJEvent(b.jEven);b.views&&this.addTViews(b.views)},initJEvent:function(b){tak.hStr(b)?b=[{en:b}]:tak.iObj(b)&&(b=[b]);for(var c,d=0;d<b.length;d++)if(c=b[d],tak.hStr(c)&&(c={en:c}),tak.hStr(c.jId)||(c.jId=this.defEvenJqo()),tak.iObj(c)){var e=c.jen;tak.hStr(e)||(e=c.en);this.bindJQEvF(e,c.jId,this.jQEventFun(c))}},defEvenJqo:function(){return"base"},jQEventFun:function(b){var c={arg:b.arg},d=b.en,e=b.func,f=b.on,g=b.pn;return function(b,k){c.je=b;c.jqo=k;tak.hStr(d)&&this.doEv(d,c);if(e){var h=this;tak.iObj(f)?h=f:tak.hStr(f)&&(h=h.getProObj(tak.hStr(g)?g:"id",f));h&&h.getFunc(e,h,[this,c])}}},onVisibleChange:function(b){b?this.show():this.hide()},hide:function(){1==this.visible?this.visible=!1:this.rended&&this.hideJqo()},show:function(){0==this.visible?this.visible=!0:this.rended&&this.showJqo()},showJqo:function(b){this.rmJQClass("hide",b)},hideJqo:function(b){this.addJQClass("hide",b)},bindPaEv:function(b,c){this.parent&&this.parent.bindEv(b,c,this)},setVAtt:function(b){this.vAtt=$.extend(!0,{},this.vAtt,b)},getAtt:function(b,c){var d=this.vAtt;if(d&&d[b]){if(d[b][c])return d[b][c];if("base"==c)return d[b]}},crtJQO:function(b,c,d,e){if(tak.hStr(b)){3==arguments.length&&tak.iObj(d)&&(e=d,d=null);2==arguments.length&&tak.iObj(c)&&(e=c,c=d=null);this.jqo||(this.jqo={});tak.hStr(c)||(c="base");var f=this.jqo[c];if(f)return f;f=$("\x3c"+b+"\x3e");this.jqo[c]=f;tak.hStr(d)||(d=c);this.newJQAtt(c,f,d,e);return f}},setAtt:function(b,c){for(var d in c)"class"==d?b.addClass(c[d]):b.attr(d,c[d])},newJQAtt:function(b,c,d,e){if(c){var f=this.getAtt("def",d);f&&this.setAtt(c,f);if(this.scene)for(var g=this.scene,h=0;h<g.length;h++)(f=this.getAtt(g[h],d))?this.setAtt(c,f):"base"==b&&c.addClass(g[h]);e&&this.setAtt(c,e)}},setJQAtt:function(b,c,d){this.getJQO(b,function(b){tak.jQAtt(b,c,d)})},rmJQO:function(b,c,d){tak.hStr(b)||(b="base");for(var e in this.jqo)if(e==b)return b=this.jqo[e],tak.iFun(c)&&c.call(d?d:this,b),delete this.jqo[e],b.remove(),b},getJQO:function(b,c,d){tak.iFun(b)&&(d=c,c=b,b=null);tak.hStr(b)||(b="base");for(var e in this.jqo)if(e==b)return b=this.jqo[e],tak.iFun(c)&&c.call(d?d:this,b),b},eachJQO:function(b,c){if(this.jqo&&tak.iFun(b)){var d,e;for(e in this.jqo)d=this.jqo[e],b.call(c?c:this,d,e)}},clearJQO:function(){if(this.jqo){var b,c;for(c in this.jqo)b=this.jqo[c],delete this.jqo[c],b.remove()}},bindJQEv:function(b,c,d,e){if(tak.hStr(b)&&tak.hStr(c)){var f=this;this.getJQO(d,function(d){d.on(b,function(){f.doEv.call(f,c,{jqo:d,sArg:e,jArg:arguments})})})}},bindJQEvF:function(b,c,d,e){tak.iFun(d)||(e=d,d=c,c=null);if(tak.hStr(b)&&tak.iFun(d)){e||(e=this);var f=function(c){c.on(b,function(b){d.call(e,b,c)})};tak.ckTN(c,jQuery)?f(jID):this.getJQO(c,f)}},addJQClass:function(b,c){tak.hStr(b)&&this.getJQO(c,function(c){c.addClass(b)})},rmJQClass:function(b,c){tak.hStr(b)&&this.getJQO(c,function(c){c.removeClass(b)})},setJQCss:function(b,c,d){tak.hStr(b)&&this.getJQO(d,function(d){d.css(b,c)})},getJQAtt:function(b,c){tak.hStr(b)&&this.getJQO(c,function(c){c.attr(b,av)})},getJQVal:function(b){var c;this.getJQO(b,function(b){c=tak.jQValr(b)});return c},setJQVal:function(b,c){this.getJQO(c,function(c){tak.jQValw(b,c)})},aplEnable:function(b){this.aplJQEnable(b);takRendObj.prototype.aplEnable.call(this,b)},aplJQEnable:function(b){this.eachJQO(function(c){tak.jQEnable(b,c)})},doRend:function(b){var c=this.genJqoView();this.rended&&b.rendTakView(this);return c},getJqoCon:function(b){if(b){var c;return this.rMap&&(c=this.rMap.getCon(b),!c)?void 0:this.getJQO(c)}},rendTakView:function(b){var c=this.getJqoCon(b);c&&(tak.ckTN(b,HtmlV)?this.appendView(c,b):tak.ckTN(b,takCtrl)?this.appendView(c,b.baseV):tak.ckTN(b,jQuery)&&c.append(b))},appendView:function(b,c){c.baseJqo&&b.append(c.baseJqo)},genJqoView:function(){if(!this.rended)try{return this.doEv("beginRend"),this.baseJqo=this.create(),this.doEv("createJqoed",this.baseJqo),this.rended=tak.ckTN(this.baseJqo,jQuery)}catch(b){this.baseJqo=null,tak.logErr("["+this.constructor.name+"]\u6e32\u67d3HTML\u89c6\u56fe\u5bf9\u8c61\u5931\u8d25 ",b)}},getHVal:function(){return this.rended&&!this.hasSub()?this.getJQVal(this.getIptJId()):this.__val__},setHVal:function(b){return this.rended&&!this.hasSub()?(this.setJQVal(b,this.getIptJId()),!0):!1},getIptJId:function(){return"base"},groupPkg:function(b){return b},objPkg:function(b){return b},rendSub:function(b){b&&b.rend(this)},create:function(){return this.crtJQO(this.tag)},onRemove:function(){this.clearJQO();delete this.jqo;takRendObj.prototype.onRemove.call(this)}});function takView(){}defCls(takView,HtmlV,{onInit:function(b){HtmlV.prototype.onInit.call(this,b);b.vPkgs&&(this.vPkgs=this.initVPkgs(b.vPkgs));b.valid&&this.setValidTmp(b.valid)},onLoad:function(b){HtmlV.prototype.onLoad.call(this,b);tak.iObj(b.views)&&this.addTObjs(b.views)},viewDlg:function(b){tak.ckTN(b,takCtrl)&&this.delegate!=b&&(this.willDlgChanged(),this.delegate=b,this.onDlgChanged());return this.delegate},doDlgFun:function(b,c){var d=this.delegate;tak.iAry(c)||(c=[c]);var e;tak.ckTN(this.delegate,takTmpObj)&&(e=d.getFunc(b));!e&&this.defDlg&&(e=this.defDlg[b],d=this);if(e)return e.apply(d,c)},willDlgChanged:function(){},onDlgChanged:function(){},initVPkgs:function(b){var c=[];tak.eachAry(this,b,function(b){c.push(this.newObj(tak.defTmp(b,"tmps"),{type:"takPkger"}))});return c},getCvtOpts:function(){if(this.dCvt)return this.dCvt.getOpts()},setCvtOpts:function(b,c){this.dCvt?this.dCvt.setOpts(b):(c?c.opts=b:c={opts:b},this.setDCvt(this.newObj(this.defCvtTmp(),c)))},objPkg:function(b){if(this.vPkgs)for(var c=0;c<this.vPkgs.length;c++)if(b=this.vPkgs[c].pkgObj(b),!b)return;return b},setValidTmp:function(b){this.valider=(new takValider).init(this,b)},getJQVal:function(b){b=HtmlV.prototype.getJQVal.call(this,b);return this.dCvt?this.dCvt.getVal(b):b},setJQVal:function(b,c){this.dCvt&&(b=this.dCvt.getTxt(b));HtmlV.prototype.setJQVal.call(this,b,c)},onRended:function(){HtmlV.prototype.onRended.call(this);this.bindJQEvF("change",this.getIptJId(),function(b){this.doHValChange(this.getHVal())})},valid:function(){var b;b=this.valider?this.valider.valid():{s:!0,v:this.getVal()};this.eachSub(function(c){tak.ckTN(c,takView)&&(c=c.valid())&&0==c.s&&(b.s=!1,tak.hStr(c.m)&&(b.m=b.m?b.m+"\n"+c.m:c.m))},this);return b},doHValChange:function(){HtmlV.prototype.doHValChange.call(this);this.valid()},rendVal:function(){!HtmlV.prototype.rendVal.call(this)&&this.dCvt&&this.reVal()}});function ListV(){}defCls(ListV,takView,{defDlg:{listVRmItem:function(b,c){c.dispose()},listVItemCount:function(b){b=b.val();return tak.iAry(b)?b.length:0},listVNewItem:function(b,c,d){if(d=this.addTObj({id:"item_"+c.toString()}))b=b.val(),tak.iAry(b)&&b.length>c&&d.val(b[c]);return d},listVGenVal:function(b){return[]},listVItemVal:function(b,c,d){c?tak.iAry(c)||(c=[c]):c=[];c.push(d.getHVal());return c}},onCrtPro:function(b){takView.prototype.onCrtPro.call(this,b);this.subDef={type:"SpanV"};this.rowId=0;this.items=[]},onDlgChanged:function(){takView.prototype.onDlgChanged.call(this);this.reVal()},willDlgChanged:function(){takView.prototype.willDlgChanged.call(this);this.clearItems()},genVal:function(){return this.doDlgFun("listVGenVal",[this])},execItemVal:function(b,c){return this.doDlgFun("listVItemVal",[this,b,c])},rmItemView:function(b){this.doDlgFun("listVRmItem",[this,b])},getItemCount:function(){return this.doDlgFun("listVItemCount",[this])},genItemView:function(b){return this.doDlgFun("listVNewItem",[this,b,this.subDef])},getHVal:function(){for(var b,c=this.genVal(),d=0;d<this.items.length;d++)b=this.items[d],c=this.execItemVal(c,b.view);return c},getItem:function(b){for(var c=0;c<this.items.length;c++)if(b=this.items[c],b.id==id)return b},removeId:function(b){return this.removeItem(this.getItem(b))},removeItem:function(b){return b&&(this.rmItemView(b.view),b=this.items.indexOf(b),0<=b)?(this.items.splice(b,1),!0):!1},clearItems:function(){for(var b=0;b<this.items.length;b++)this.removeItem(this.items[b])&&b--;this.rowId=0},setHVal:function(b){this.reSetItems()},reSetItems:function(){this.clearItems();for(var b=this.getItemCount(),c=0;c<b;c++)this.newItem()},newItem:function(){var b=this.genItemView(this.rowId);b&&(this.addSub(b),this.items.push({id:this.rowId,view:b}),this.rowId++)},eachItems:function(b,c){if(tak.iFun(b))for(var d=0;d<this.items.length;d++)b.call(c,this.items[d])}});function takMoldel(){}defCls(takMoldel,takMoObj,{onLoad:function(b){takMoObj.prototype.onLoad.call(this,b);tak.iObj(b.pro)&&(this.pros=this.initPros(b.pro));tak.iObj(b.views)&&(this.views=this.initViews(b.views));b.filter&&(this.filter=new takFilter(b.filter,!1))},initPros:function(b){var c={},d;for(d in b)c[d]=tak.defTmp(b[d],"name");return c},initViews:function(b){var c=[],d,e,f,g;for(g in b)if(e=this.pros[g]){d=tak.defTmp(b[g],"tmp");f={};f.tmp=tak.defTmp(d.tmp,"type");f.tmp.bind=g;f.tmp.id=g;f.tmp.pro=e;if(tak.iObj(d.func)){f.func={};for(var h in d.func)e=tak.defTmp(d.func,"cmd"),f.func[h]=tak.createFun(h,e.args,e.cmd)}tak.hStr(d.onState)?f.onState=[d.onState]:tak.iAry(d.onState)&&(f.onState=d.onState);c.push(f)}return c},initCells:function(b){var c={},d,e,f;for(f in b)if(e=this.pros[f])d=tak.defTmp(b[f],"type"),d.bind=f,d.id=f,d.pro=e,c[f]=d;return c},clearViews:function(b){if(this.views){var c,d;for(d in this.views)(c=b.getChild(d))&&c.dispose()}},genViews:function(b){if(this.views){var c=[],d,e;for(e in this.views)d=this.views[e],this.checkCon(d,b)&&c.push(d.tmp);this.filter&&(c=this.filter.getObjs(c));return c}},execAct:function(b,c,d){if(b&&this.views){d&&!tak.iAry(d)&&(d=[d]);var e,f,g;for(g in this.views)e=this.views[g],e.func&&(f=e.func[c])&&(e=b.getChild(g))&&f.apply(e,d)}},checkCon:function(b,c){return b.onState?0<=b.onState.indexOf(c):!0}});function TableV(){}defCls(TableV,ListV,{defDlg:{tableVGenHead:function(b){},tableVRmRow:function(b,c){c.dispose()},tableVRowCount:function(b){b=b.val();return tak.iAry(b)?b.length:0},tableVNewRow:function(b,c,d){if(d=this.addTObj({id:"item_"+c.toString()}))b=b.val(),tak.iAry(b)&&b.length>c&&d.val(b[c]);return d},tableVGenVal:function(b){return[]},tableVRowVal:function(b,c,d){c?tak.iAry(c)||(c=[c]):c=[];c.push(d.getHVal());return c}},genVal:function(){return this.doDlgFun("tableVGenVal",[this])},execItemVal:function(b,c){return this.doDlgFun("tableVRowVal",[this,b,c])},rmItemView:function(b){this.doDlgFun("tableVRmRow",[this,b])},getItemCount:function(){return this.doDlgFun("tableVRowCount",[this])},genItemView:function(b){return this.doDlgFun("tableVNewRow",[this,b,this.subDef])},genHeader:function(){this.doDlgFun("tableVGenHead",[this])},onCrtPro:function(b){ListV.prototype.onCrtPro.call(this,b);this.subDef={type:"RowV"};this.fixHead=!1},onInit:function(b){ListV.prototype.onInit.call(this,b)},create:function(){return this.crtJQO(this.tag).append(this.crtTableJQ())},crtTableJQ:function(){return this.crtJQO("table","table")},getJqoCon:function(b){var c;tak.ckTN(b,RowV)&&(c=b.rType);b=this.getJQO("table");if(!tak.hStr(c))return b;var d=this.getJQO(c);if(d)return d;switch(c){case "head":c=this.headJqo;c||(c=this.crtJQO("tHead","head"),b.append(c),this.headJqo=c);break;case "foot":c=this.footJqo;c||(c=this.crtJQO("tFoot","foot"),b.append(c),this.footJqo=c);break;default:c=this.bodyJqo,c||(c=this.crtJQO("tBody","body"),b.append(c),this.bodyJqo=c)}return c},viewDlg:function(b){ListV.prototype.viewDlg.call(this,b);(b=this.genHeader())&&this.addSub(b)},eachRows:function(b,c){this.eachItems(b,c)}});function RowV(){}defCls(RowV,takView,{onCrtPro:function(b){takView.prototype.onCrtPro.call(this,b);this.subDef={type:"CallV"};this.tag="tr";this.rType="body"},onInit:function(b){takView.prototype.onInit.call(this,b);tak.hStr(b.rType)&&(this.rType=b.rType,"head"==this.rType&&(this.subDef.tag="th"))},onLoad:function(b){takView.prototype.onLoad.call(this,b);this.genFileds(b.fileds)},genFileds:function(b){if(tak.iObj(b)){var c,d;for(d in b)c=b[d],c.id="c_"+d,this.addSub(this.newObj(c,this.subDef))}},getConObj:function(b){var c;b.pro&&(c=b.pro.onCell);tak.hStr(c)||(c=b.id);if(c)return this.getCell(c)},getCell:function(b){return this.getChild("c_"+b)}});function CallV(){}defCls(CallV,takView,{onCrtPro:function(b){takView.prototype.onCrtPro.call(this,b);this.tag="td";this.vhName="base"},onInit:function(b){takView.prototype.onInit.call(this,b);"th"==this.tag&&(this.isHead=!0);b.lView&&this.initLV(b.lView);b.rView&&this.initRV(b.rView)},onLoad:function(b){takView.prototype.onLoad.call(this,b);this.isHead&&this.val(this.getName())},initLV:function(b){if(b=this.newObj(b,this.subDef))this.lView=b,this.addSub(b)},initRV:function(b){if(b=this.newObj(b,this.subDef))this.rView=b,this.addSub(b)},getIptJId:function(){return this.vhName},create:function(){var b=this.crtJQO(this.tag);if(this.lView||this.rView)this.vhName="valSp",b.append(this.crtJQO("span",this.vhName));return b},getJqoCon:function(b){return this.getJQO(this.vhName)},appendView:function(b,c){c==this.lView?c.baseJqo.insertBefore(b):c==this.rView?c.baseJqo.insertAfter(b):(this.cViews||(b.empty(),this.cViews=[]),this.cViews.push(c),b.append(c.baseJqo))},getHVal:function(){return this.rended&&!this.cViews?this.getJQVal(this.getIptJId()):this.__val__},setHVal:function(b){this.rended&&!this.cViews&&this.setJQVal(b,this.getIptJId())},onRmSubed:function(b){takView.prototype.onRmSubed.call(this,b);if(this.cViews){for(var c=0;c<this.cViews;c++)if(this.cViews[c]==b){this.cViews.splice(c,1);break}0==this.cViews.length&&(this.cViews=null,this.reVal())}}});function TreeV(){}defCls(TreeV,takView,{onCrtPro:function(b){takView.prototype.onCrtPro.call(this,b);tak.genPro(this,"openState","1"==b.isOpen,this.openStateChange);tak.genPro(this,"isRoot",!1,function(b,d){return b?!1:this.openState=!0});this.nodeTmp=b;this.subPn="subs";this.nodes=[];this.subId=0},onInit:function(b){takView.prototype.onInit.call(this,b);tak.iObj(b.nodeTmp)&&(this.nodeTmp=b.nodeTmp);tak.hStr(b.subPn)&&(this.subPn=b.subPn)},getConObj:function(b){return this},getRoot:function(){return this.isRoot?this:tak.ckTN(this.parent,TreeV)?this.parent.getRoot():this},parentDo:function(b,c,d){isNull(d)&&(d=-1);tak.ckTN(this.parent,TreeV)&&(c.call(b,this.parent),0>d||0<d)&&(d--,this.parent.parentDo(b,c,d))},funBrother:function(b){if(tak.ckTN(this.parent,TreeV))return this.parent.findNode(b,1,this)},findNode:function(b,c,d){d||(d=this);isNull(c)&&(c=-1);for(var e,f=0;f<this.nodes.length;f++)if(e=this.nodes[f],e!=d&&b.call(d,e))return e;if(0>c||0<c)for(c--,f=0;f<this.nodes.length;f++)if(e=this.nodes[f],e=e.findNode(b,c,d))return e},findNodeFR:function(b,c){isNull(c)&&(c=-1);var d=this.getRoot();if(d)return d.findNode(b,c,this)},getLevel:function(){if(this.isRoot)return 0;if(tak.ckTN(this.parent,TreeV)){var b=this.parent.getLevel();return 0<=b?b+1:-1}return-1},onParentChanged:function(b){takView.prototype.onParentChanged.call(this,b);this.isRoot=!tak.ckTN(b,TreeV)},openStateChange:function(b,c){var d=tak.iBool(c);d&&(this.onOpenStateChange(c),this.getRoot().doEv("openStateChanged",this));return d},onOpenStateChange:function(b){this.setSubCon(this.baseJqo,b)},setSubCon:function(b,c){b&&(c?(b.removeClass("nClose"),b.addClass("nOpen")):(b.removeClass("nOpen"),b.addClass("nClose")))},onNodeCountChange:function(){this.hasSubNode()||this.rmJQO("subCon")},hasSubNode:function(){return 0<this.nodes.length},setOpenState:function(b,c){isNull(c)&&(c=0);this.openState=b;if(0<c||0>c){c--;for(var d=0;d<this.nodes.length;d++)this.nodes[d].setOpenState(b,c)}},open:function(b){this.setOpenState(!0,b)},close:function(b){this.setOpenState(!1,b)},getHVal:function(){var b={};if(0<this.nodes.length){b[this.subPn]=[];for(var c,d=0;d<this.nodes.length;d++)c=this.nodes[d].getVal(),isNull(c)||b[this.subPn].push(c)}return b},setHVal:function(b){this.reSetNodes(b)},rendContent:function(b){},rendSubTag:function(){var b=this.crtJQO("ul","subCon");this.baseJqo.append(b);return b},create:function(){var b;b=tak.ckTN(this.parent,TreeV)?this.crtJQO("li","base"):this.crtJQO("div","divCon");var c=this.getLevel();b.addClass("leve"+c.toString());this.setSubCon(b,this.openState);this.isRoot||this.rendContent(b);return b},getSubCon:function(b){var c=this.getJQO("subCon");c||0==b||(c=this.rendSubTag());return c},getViewCon:function(b){return null},clearNodes:function(){for(var b;0<this.nodes.length;)b=this.nodes[0],b.owner==this?b.dispose():b.remove()},reSetNodes:function(b){this.clearNodes();this.isRoot?this.setRootVal(b):this.setNodeVal(b);this.crtNodes(b)},setRootVal:function(b){},setNodeVal:function(b){},crtNodes:function(b){tak.iObj(b)&&(b=b[this.subPn])&&tak.eachAry(this,b,function(b){this.newNode(b)})},newNode:function(b){var c=this.newObj({id:"node_"+this.subId.toString()},this.nodeTmp);c&&(c.val(b),this.addSub(c),this.subId++);return c},getJqoCon:function(b){return tak.ckTN(b,TreeV)?this.getSubCon():this.getViewCon()},onAdSubed:function(b){tak.ckTN(b,TreeV)&&(this.nodes.push(b),this.onNodeCountChange());takView.prototype.onAdSubed.call(this,b)},onRmSubed:function(b){takView.prototype.onRmSubed.call(this,b);tak.ckTN(b,TreeV)&&(b=this.nodes.indexOf(b),0<=b&&(this.nodes.splice(b,1),this.onNodeCountChange()))},onRemove:function(){this.clearNodes();takView.prototype.onRemove.call(this)}});function takCtrl(){}defCls(takCtrl,takRendObj,{onCrtPro:function(b){takRendObj.prototype.onCrtPro.call(this,b);tak.genPro(this,"state",b.state,this.stateChange);this.loadingOn=!0},onInit:function(b){takRendObj.prototype.onInit.call(this,b);this.baseV=this.newObj(b.baseV,{type:"takView",id:"baseV"});tak.iObj(b.lder)&&this.initLoader(b.lder);tak.iObj(b.cmter)&&this.cmter(b.cmter);b.param&&(this.param=b.param);tak.hStr(b.loadParam)&&(this.loadParam=b.loadParam);b.varDef&&(this.varDef=b.varDef)},defCvtTmp:function(){return{type:"treeCvt"}},myVar:function(b,c){if(tak.hStr(b)){if(1==arguments.length&&this.varDef)return tak.copy(this.varDef[b]);2==arguments.length&&(this.varDef||(this.varDef={}),this.varDef[b]=c)}},initLoader:function(b){if(tak.iObj(b)){b=tak.defTmp(b,"def");var c={},d,e;for(e in b)(d=this.newObj(b[e],this.defLoader()))&&(c[e]=d);this.loaders=c}},defLoader:function(){return{type:"takMLoad"}},defCommiter:function(){return{type:"takCommiter"}},onVisibleChange:function(b){this.eachChild(function(b){tak.ckTN(b,HtmlV)&&(b.visible=b)})},rendSub:function(b){b.rend(this.baseV)},doRend:function(b){tak.ckTN(b,jQuery)?this.baseV.rend(b):tak.ckTN(b,takView)?b.addObj(this.baseV):tak.ckTN(b,takCtrl)&&b.baseV&&b.baseV.addObj(this.baseV);this.rended=this.baseV.rended;return!0},rendTakView:function(b){this.baseV.rendTakView(b)},aplEnable:function(b){takRendObj.prototype.aplEnable.call(this,b);this.baseV&&this.baseV.aplJQEnable(b)},onRemove:function(){this.baseV.remove()},lder:function(b){tak.hStr(b)||(b="def");if(this.loaders){var c=this.loaders[b];c||tak.logErr("\u63a7\u5236\u5668["+this.id+"]\u4e0b\uff0c\u672a\u914d\u7f6e\u8bfb\u53d6\u8bbe\u5907:"+b);return c}tak.logErr("\u63a7\u5236\u5668["+this.id+"]\u4e0b\uff0c\u672a\u914d\u7f6e\u8bfb\u53d6\u8bbe\u5907\u3002")},cmter:function(b){var c=this.commiter;if(!c||b)c=this.defCommiter(),b||(b=c,c=null),this.commiter=c=this.newObj(b,c);return c},stateChange:function(b,c){var d=tak.hStr(c);d&&(this.onStateChange(c),this.doEv("stateChanged",c));return d},onStateChange:function(b){},getLoadParam:function(b,c){if(tak.hStr(b)){var d=this.getFunc(b);d&&(c=d.call(this,this.param,c))}return c},commitData:function(b,c,d){var e=this.cmter();e&&e.commit(d,b,c)},loadData:function(b,c,d){2==arguments.length&&tak.iObj(c)?(d=c,c=null):1==arguments.length&&(d=this,c=null);var e=this.lder(c);e&&e.load(b,d)},refData:function(b){(b=this.lder(b))&&b.refrash()},onWillCrt:function(b,c){takRendObj.prototype.onWillCrt.call(this,b,c);tak.ckTN(b,takCtrl)&&!tak.hStr(c.state)&&(c.state=this.state)}});function vCtrl(){}defCls(vCtrl,takCtrl,{onCrtPro:function(b){takCtrl.prototype.onCrtPro.call(this,b);this.loadingOn=!0},onInit:function(b){takCtrl.prototype.onInit.call(this,b);b.filter&&(this.filter=new takFilter(b.filter,!1));tak.iObj(b.views)&&this.initViews(b.views)},initViews:function(b){var c=[],d,e;for(e in b)d=b[e],(d=this.genVT(e,d))&&c.push(d);this.views=c},genVT:function(b,c){c=tak.defTmp(c,"tmp");c.tmp.jEven&&(c.tmp.jEven=tak.defTmp(c.tmp.jEven,"func"),c.tmp.jEven.on||(c.tmp.jEven.on=this));tak.hStr(c.group)||(c.group="def");c.tmp.id=b;c.tmp=tak.unTmp(this.defBtn,c.tmp);if(!this.filter||this.filter.check(c.tmp))return tak.hStr(c.onState)&&(c.onState=[c.onState]),c},setUpViews:function(b,c,d,e){if(this.views){tak.hStr(e)||(e=this.state);var f,g;tak.hStr(b)||(b="def");tak.ckTN(d,takMoObj)||(d=this);tak.ckTN(c,takView)||(c=this.baseV);for(var h=0;h<this.views.length;h++)f=this.views[h],b==f.group&&(f=d.getChild(f.tmp.id))&&f.dispose();for(h=0;h<this.views.length;h++)if(f=this.views[h],b==f.group&&(!f.onState||0<=f.onState.indexOf(e))&&(g=c.getConObj(f.tmp)))if(f=d.newObj(f.tmp,g.subDef))g.addObj(f),this.doEv("createViewed",f)}},valid:function(b,c,d){if(b)return b=b.valid(),1==b.s&&c?this.getFunc(c,this,b.v):0==b.s&&d&&this.getFunc(d,this,b.m),b}});function takPkger(b){}defCls(takPkger,takTmpObj,{onInit:function(b){takTmpObj.prototype.onInit.call(this,b);this.pN="vCate";tak.hStr(b.pN)&&(this.pN=b.pN);tak.iObj(b.pros)&&(this.pros=b.pros);this.autoPro="0"==b.autoPro?!1:!0;this.parseTmp(b.tmps)},parseTmp:function(b){var c={},d;for(d in b)c[d]=tak.defTmp(b[d],"type");this.tmps=c},genNewTmp:function(b,c,d){b=tak.copy(b);!b.pro&&this.autoPro&&(b.pro=c.pro);return b},getTmp:function(b,c){if(this.tmps){var d=this.tmps[c];d&&(d=this.genNewTmp(d,b,c));return d}},genPkgV:function(b,c){var d=this.getTmp(b,c);if(tak.iObj(d)&&(!b||!this.filter||this.filter.check(b)))return(d=this.owner.newObj(d))&&d.bindEv("subRemoved",function(b){b.subs&&0!=b.subs.length||b.dispose()}),{o:d,n:!0}},pkgObj:function(b){if(b){var c=b.getDPro(this.pN,"def");(c=this.genPkgV(b,c))&&c.o&&(b=c.o.addSub(b)&&c.n?c.o:null);return b}}});function takGPkger(){}defCls(takGPkger,takPkger,{genPkgV:function(b,c){if(!tak.hStr(c))return null;this.pkgVs||(this.pkgVs={});var d=this.pkgVs[c];if(d)return{o:d,n:!1};(d=takPkger.prototype.genPkgV.call(this,b,c))&&d.o&&(this.pkgVs[c]=d.o,d.o.bindEv("disposed",function(b){delete this.pkgVs[c]},this));return d},pkgObjs:function(b){for(var c=[],d,e=0;e<b.length;e++)d=b[e],(d=this.pkgObj(d))&&c.push(d);return c}});function defTmpLd(){this.tmpSonre=new Map;this.svrs=[];this.baseUrl="";this.defType="js"}defCls(defTmpLd,{setBaseUrl:function(b){this.baseUrl=b},setDefType:function(b){if("json"==b||"js"==b)this.defType=b},reqJson:function(b,c){try{tak.xhrRequest(b,{method:"GET",header:{"content-type":"text/json"},respType:"json",success:function(b){c.call(this,!0,b,"0000","\u52a0\u8f7d\u6210\u529f")},err:function(b,d){c.call(this,!1,null,b,d)},on:this})}catch(e){tak.logErr("\u8bfb\u53d6json\u6a21\u677f\u5931\u8d25",e);var d="\u65e0";"string"==typeof e?d=e:"object"==typeof e&&(d=e.message);c.call(this,!1,null,"9994",d)}},reqJs:function(b,c,d){try{tak.xhrRequest(b,{method:"GET",header:{"content-type":"text/plan"},respType:"text",success:function(b){if(tak.hStr(b))try{b=b.trim(),0==b.indexOf("{")&&(b="("+b+")"),b=eval(b),c.call(this,!0,b,"0000","\u52a0\u8f7d\u6210\u529f",d)}catch(f){tak.logErr("js\u6a21\u677f\u89e3\u6790\u5931\u8d25",f),c.call(this,!1,null,"9995","js\u6a21\u677f\u89e3\u6790\u5931\u8d25",d)}else c.call(this,!1,null,"9996","\u8bf7\u6c42\u5230\u7a7a\u6570\u636e",d)},err:function(b,f){c.call(this,!1,null,b,f,d)},on:this})}catch(e){tak.logErr("\u8bfb\u53d6json\u6a21\u677f\u5931\u8d25",e),b="\u65e0","string"==typeof e?b=e:"object"==typeof e&&(b=e.message),c.call(this,!1,null,"9994",b)}},reqTmp:function(b,c,d,e,f){b||e.call(this,!1,null,"9996","\u6a21\u677f\u8bf7\u6c42\u53c2\u6570\u4e3a\u7a7a",f);var g=this.tmpSonre;if(d=g.get(b))return e.call(this,!0,d,null,null,f);d=function(c,d,p,l){c?d?(g.set(b,d),e.call(this,!0,d,null,null,f)):e.call(this,!1,d,"9991","\u6a21\u677f\u89e3\u6790\u5931\u8d25",f):e.call(this,c,null,p,l,f)};tak.hStr(c)||(c=this.defType);"json"==c?this.reqJson(this.baseUrl+b,d):this.reqJs(this.baseUrl+b,d)},loadFile:function(b,c,d,e){tak.iFun(d)&&b&&(b=tak.defTmp(b,"param"),c&&c.call(e,"\u6b63\u5728\u8bfb\u53d6\u9875\u9762..."),this.reqTmp(b.param,b.type,tak.hStr(b.rid)?b.rid:"",function(b,g,h,k){b?(c&&c.call(e,"\u6b63\u5728\u8bfb\u53d6\u5f15\u7528..."),b=g.svrs,delete g.svrs,this.loadSvrs(b,function(b){b?(b=g.refs,delete g.refs,this.loadRefs(b,function(b,c){g.refTmps=c;b?d.call(e,b,g,"0000","\u52a0\u8f7d\u5b8c\u6210"):d.call(e,b,g,"9993","\u5f15\u7528\u6587\u4ef6\u52a0\u8f7d\u5931\u8d25")},this)):d.call(e,b,g,"9992","\u4f9d\u8d56\u811a\u672c\u52a0\u8f7d\u5931\u8d25")})):d.call(e,b,g,h,k)}))},loadSvrs:function(b,c){if(tak.iAry(b)){for(var d={},e,f=0;f<b.length;f++)e=b[f],tak.hStr(e)&&0>this.svrs.indexOf(e.toLowerCase())&&(d["l_"+f]={req:e});e=!1;for(f in d)e=!0,t=d[f],this.reqJs(t.req,function(b,e,f,p,l){l.rc=!0;(l.isOk=b)&&this.svrs.push(l.req.toLowerCase());e=b=!0;for(var g in d){f=d[g];if(!f.rc){b=!1;break}f.isOk||(e=!1)}b&&c.call(this,e)},t);e||c.call(this,!0)}else c.call(this,!0)},loadRefs:function(b,c,d){if(tak.iObj(b)){var e={},f,g;for(g in b)f=tak.defTmp(b[g],"param"),e[g]={param:f.param,type:f.type,rid:g};var h=function(){var d=!0,f=!0,g,h;for(h in e){g=e[h];if(!g.rc){d=!1;break}g.isOk||(f=!1)}d&&c.call(this,f,b)};for(g in e)f=e[g],this.reqTmp(f.param,f.type,tak.hStr(f.rid)?f.rid:"",function(c,d,e,g,m){b[m.rid]=d;c&&d.refs?this.loadRefs(d.refs,function(b,c){d.refTmps=c;m.rc=!0;m.isOk=b;h.call(this)},this):(c||tak.logErr("\u5f15\u7528\u6587\u4ef6["+f.rid+"]\u52a0\u8f7d\u5931\u8d25,code:"+e+",msg:"+g),m.rc=!0,m.isOk=c,h.call(this))},f)}else c.call(this,!0,null)}});function listCtrl(){}defCls(listCtrl,takCtrl,{onCrtPro:function(b){takCtrl.prototype.onCrtPro.call(this,b);this.subDef={type:"vCtrl"};this.subid=0},onInit:function(b){takCtrl.prototype.onInit.call(this,b);tak.iObj(b.conView)&&(this.conView=b.conView,this.conView.id=null);tak.iObj(b.ctrls)&&this.initCtrls(b.ctrls)},genSubs:function(b){if(tak.iObj(b)){var c,d;for(d in b)c=b[d],tak.iObj(c)&&(c.id=d,c=this.newObj(c,this.subDef),this.addCtrl(c))}},initCtrls:function(b){var c,d;for(d in b)c=tak.defTmp(b[d],"ctrl"),c.id=d,this.addCtrl(c)},rendSubs:function(){this.ctrls&&0<this.ctrls.length&&a&&this.openCtrl(this.ctrls[0].id)},rendSub:function(b){if(b){var c;tak.hStr(b.id)?c=this.openCtrl(b.id):b.id=this.getCtrlId();c?(c.view==this.baseV&&(b.visible=c.active),b.rend(c.view)):this.addCtrl(b)}},onRmSubed:function(b){takCtrl.prototype.onRmSubed.call(this,b);tak.ckTN(b,takCtrl)&&tak.hStr(b.id)&&this.rmCtrl(b.id)},getCtrlId:function(){var b="at_ctrl_"+this.subid.toString();this.subid++;return b},getCtrlById:function(b,c,d){var e,f;if(this.ctrls){for(var g=0;g<this.ctrls.length;g++)e=this.ctrls[g],e.id==b&&(f=e);f&&tak.iFun(c)&&c.call(d,f)}return f},eachCtrl:function(b,c){if(this.ctrls)for(var d,e=0;e<this.ctrls.length;e++)d=this.ctrls[e],b.call(c,d)},findCtrl:function(b,c){var d=[];if(this.ctrls)for(var e,f=0;f<this.ctrls.length;f++)e=this.ctrls[f],1==b.call(c,e)&&d.push(e);return d},findCtrlF:function(b,c){if(this.ctrls)for(var d,e=0;e<this.ctrls.length;e++)if(d=this.ctrls[e],1==b.call(c,d))return d},addCtrl:function(b){if(tak.ckTN(b,takCtrl))return this.addCtrl(this.crtCtrlOpt(b));tak.hStr(b.id)||(b.id=this.getCtrlId());var c=this.getCtrlById(b.id);if(c)return this.openCtrl(b.id),c;this.ctrls||(this.ctrls=[]);b.active=!1;this.ctrls.push(b);this.onAddOpted(b);return b},onAddOpted:function(b){this.rended&&this.openCtrl(b.id)},crtCtrlOpt:function(b){return{id:b.id,obj:b}},openCtrl:function(b){if(this.ctrls)return this.activeCtrl(this.getCtrlById(b))},rmCtrl:function(b){if(tak.ckTN(b,takCtrl))if(tak.hStr(b.id))b=this.getCtrlById(b.id);else return;else tak.hStr(b)&&(b=this.getCtrlById(b));if(b.obj){var c=b.obj;delete b.obj;c.owner==this?c.dispose():c.remove()}this.onRmCtrled(b)},onRmCtrled:function(b){b.view&&b.view!=this.baseV&&b.view.dispose();delete b.view;this.onHideCtrled(b);for(var c,d,e=0;e<this.ctrls.length;e++)if(c=this.ctrls[e],c.id==b.id){this.ctrls.splice(e,1);c.active&&(e<this.ctrls.length?d=this.ctrls[e]:0<e&&0<this.ctrls.length&&(d=this.ctrls[e-1]),d&&this.showCtrl(d));break}},activeCtrl:function(b){if(b){var c=this.findCtrlF(function(c){return c!=b&&c.active},this);c&&this.hideCtrl(c);b&&this.showCtrl(b);return b}},hideCtrl:function(b){b.active=!1;b.view!=this.baseV?b.view.visible=!1:b.obj&&(b.obj.visible=!1);this.onHideCtrled(b)},onHideCtrled:function(b){this.doEv("hideCtrled",b)},showCtrl:function(b){b.view||(this.conView&&(b.view=this.newObj(this.conView)),b.view?this.baseV.addObj(b.view):b.view=this.baseV);b.obj||this.reqCtrl(b);b.active||(b.active=!0,b.view!=this.baseV?b.view.visible=!0:b.obj&&(b.obj.visible=!0),this.onShowCtrled(b))},onShowCtrled:function(b){this.doEv("showCtrled",b)},reqCtrl:function(b){b&&b.ctrl&&this.loadCtrl(b,function(c){this.genCtrl(b,c);b.view.hideLoading()},this)},genCtrl:function(b,c){if(b.view&&(tak.iObj(c)&&tak.hStr(b.rid)&&(c=c[b.rid]),tak.iObj(c)))if(c=tak.unTmp(c,b),b.obj=this.newObj(c,this.subDef),b.obj)try{this.addObj(b.obj)}catch(d){this.alertError("\u63a7\u5236\u5668","\u63a7\u5236\u5668\u914d\u7f6e\u9519\u8bef\uff0c\u52a0\u8f7d\u5931\u8d25\u3002",d),this.rmCtrl(b)}else this.alertError("\u63a7\u5236\u5668","\u63a7\u5236\u5668\u914d\u7f6e\u65e0\u6548"),this.rmCtrl(b)},loadCtrl:function(b,c,d){this.doEv("beginLoadCtrl",b);$.takApp.loadFile(b.ctrl,function(c){this.doEv("loadCtrlMsg",{ctrl:b,msg:c})},function(e,f,g,h){e?tak.iObj(f)?(f=tak.copy(f),c.call(d,f)):(this.alertError("\u914d\u7f6e","\u63a7\u5236\u5668\u65e0\u914d\u7f6e\u53c2\u6570\uff0c\u6216\u683c\u5f0f\u9519\u8bef\u3002"),this.rmCtrl(b)):(this.alertError(g,h),this.rmCtrl(b));this.doEv("ctrlLoadComplate",b)},this)}});function takPage(){}defCls(takPage,listCtrl,{bringToFront:function(){$.takApp.bringToFront(this)},close:function(){return this.dispose()},dispose:function(){if(0==this.doEv("willClose"))return!1;this.doEv("closed");takCtrl.prototype.dispose.call(this);return!0}});function takApp(){this.srvMng=new takSrvMag;this.pages=[];this.viewPros=new Map;takInitOpt(this)}defCls(takApp,takMoObj,{setOpt:function(b){this.initOpt=$.extend(!0,{},this.initOpt,b)},regVAtts:function(b,c,d){tak.iObj(d)||(d=c);tak.iStr(c)||(c="def");d.base||(d={base:d});var e=this.viewPros.get(b);e||(e={},this.viewPros.set(b,e));e[c]=d},getDefOpt:function(){return this.initOpt.defOpt},getVAtts:function(b){return this.viewPros.get(b)},alertF:function(){return this.initOpt.alert},confirmF:function(){return this.initOpt.confirm},tmpLoader:function(b){b&&(this.initOpt.tmpLoader=b);return this.initOpt.tmpLoader},loadFile:function(b,c,d,e){return this.initOpt.tmpLoader.loadFile(b,c,d,e)},getModelLoader:function(){return this.initOpt.modelLoader},pageTmp:function(b,c){if(tak.hStr(b)&&this.initOpt)return c&&(this.initOpt.pageTmp[b]=c),this.initOpt.pageTmp[b]},getSrv:function(b){return this.srvMng.getSrvBySN(b)},loading:function(b,c,d){b||(b=$("body"));this.initOpt.loading(b,c,d)},showMsg:function(b,c){b||(b=$("body"));this.initOpt.showMsg(b,c)},loaded:function(b){b||(b=$("body"));this.initOpt.loaded(b)},setUpService:function(b,c){this.srvMng.addSrv(b,c)},resizePage:function(b,c){var d=$("body").outerWidth(),e=$("body").outerHeight(),f=.4,g=.8;768>=d?f=1:992>=d?f=.8:1400>=d&&(f=.6);662>=e?g=1:818>=e&&(g=.9);tak.iObj(c)?(c.width||(c.width=d*f),c.height||(c.height=e*g)):c={width:d*f,height:e*g};b.baseV.baseJqo.css(c)},openPage:function(b,c){var d=$("body"),d=this.showPage(b,d);this.resizePage(d,c);this.pushPage(d)},showDialog:function(b,c,d){c||(c=$("body"));var e=$("\x3cdiv\x3e",{"class":"tak-dialog-back"});c.append(e);(b=this.showPage(b,e))?(this.resizePage(b,d),d=b.baseV.baseJqo,d.css({top:(e.innerHeight()-d.outerHeight())/2,left:(e.innerWidth()-d.outerWidth())/2}),b.bindEv("disposed",function(b){e.remove()},this)):e.remove()},showPage:function(b,c){c||(c=$("body"));tak.hStr(b.pType)||(b.pType="None");var d=tak.unTmp({type:"takPage"},this.pageTmp(b.pType));try{var e=(new Date).getTime(),f=this.newObj(d);f?(f.id=tak.uuid(),f.rend(c),f.rended?f.addCtrl(b):this.alertError("\u9519\u8bef","\u9875\u9762\u6e32\u67d3\u5931\u8d25")):this.alertError("\u9519\u8bef","\u9875\u9762\u751f\u6210\u5931\u8d25");var g=(new Date).getTime();console.log("\u9875\u9762\u52a0\u8f7d\u8017\u65f6\uff1a"+(g-e)+"ms");return f}catch(h){this.alertError("\u9519\u8bef","\u9875\u9762\u751f\u6210\u5931\u8d25",h)}},pushPage:function(b){if(tak.ckTN(b,takCtrl)&&b.baseV&&b.baseV.baseJqo){this.pages.push(b);var c=this.pages.length;b.baseV.baseJqo.css({"z-index":c+1E4});b.baseV.baseJqo.css({top:20*c,left:20*c});b.bindEv("disposed",function(b){b=this.pages.indexOf(b);0<=b&&(this.pages.splice(b,1),this.resetIndex(b))},this)}},bringToFront:function(b){var c=this.pages.indexOf(b);0<=c&&(this.pages.splice(c,1),this.pages.push(b),this.resetIndex(c))},resetIndex:function(b){tak.iNum(b)||(b=0);for(var c=b;c<this.pages.length;c++)b=this.pages[c],b.baseV.baseJqo.css({"z-index":c+1E4+1})}});(function(b){var c={outRingColor:"#7173de",inRingColor:"#76d972",backColor:"#fff",boxColor:"#fff",boxClass:"",panelSize:120,RingRadius:10,StrokeWidth:2,interval:4,speed:"1.5s"};_showDoubleRing=function(c){if(c.target&&0<c.target.length){var d=c.target.children('div[class\x3d"tak-loading-panel"]');if(0<d.length)return d.first();c.target.addClass("tak-isLoading");var d="@keyframes tak-double-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes tak-double-ring{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes tak-double-ring_reverse{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}@-webkit-keyframes tak-double-ring_reverse{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(-360deg);transform:rotate(-360deg)}}.tak-double-ring{position:relative}.tak-double-ring div{position:absolute;width:pm_outSize;height:pm_outSize;top:pm_outMargin;left:pm_outMargin;border-radius:50% !important;border:pm_strokeWidth solid #000;border-color:pm_outColor transparent pm_outColor transparent;-webkit-animation:tak-double-ring pm_speed linear infinite;animation:tak-double-ring pm_speed linear infinite}.tak-double-ring div:nth-child(2){width:pm_inSize;height:pm_inSize;top:pm_inMargin;left:pm_inMargin;border-color:transparent pm_inColor transparent pm_inColor;-webkit-animation:tak-double-ring_reverse pm_speed linear infinite;animation:tak-double-ring_reverse pm_speed linear infinite}.tak-double-ring{width:pm_boxSize !important;height:pm_boxSize !important;-webkit-transform:translate(-100px, -100px) scale(1) translate(100px, 100px);transform:translate(-100px, -100px) scale(1) translate(100px, 100px)}",f=c.target.innerWidth()<c.target.innerHeight()?c.target.innerWidth():c.target.innerHeight();c.panelSize=c.panelSize>f?f:c.panelSize;c.RingRadius=2*c.RingRadius+2*c.StrokeWidth>c.panelSize?(c.panelSize-2*c.StrokeWidth)/3:c.RingRadius;if(!(c.RingRadius-c.interval-2*c.StrokeWidth<2*c.StrokeWidth+c.interval+c.StrokeWidth)){var d=d.replace(/pm_outColor/g,c.outRingColor),d=d.replace(/pm_inColor/g,c.inRingColor),d=d.replace(/pm_speed/g,c.speed),d=d.replace(/pm_boxSize/g,c.panelSize+"px"),d=d.replace(/pm_strokeWidth/g,c.StrokeWidth+"px"),d=d.replace(/pm_outSize/g,2*c.RingRadius+"px"),d=d.replace(/pm_outMargin/g,(c.panelSize-2*c.RingRadius-2*c.StrokeWidth)/2+"px"),d=d.replace(/pm_inSize/g,2*c.RingRadius-2*c.StrokeWidth-2*c.interval+"px"),d=d.replace(/pm_inMargin/g,(c.panelSize-2*c.RingRadius-2*c.StrokeWidth)/2+c.StrokeWidth+c.interval+"px"),f=b("\x3cdiv\x3e",{"class":"tak-loading-panel",style:"position:absolute;top:0px;left:0px;buttom:0px;z-index:9998;display:flex;justify-content:center;align-items:center;width:100%;height:100%;background-color:"+c.backColor}),g="column";"1"==c.msgRight&&(g="row");g=b("\x3cdiv\x3e",{"class":c.boxClass,style:"display:flex;flex-flow:"+g+" nowrap;justify-content:center;align-items:center;background-color:"+c.boxColor});d=b("\x3cstyle\x3e",{type:"text/css"}).html(d);g.html('\x3cdiv style\x3d"width:100%;height:100%;" class\x3d"tak-double-ring"\x3e\x3cdiv\x3e\x3c/div\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/div\x3e').append(d);g.append(b("\x3cspan\x3e",{"class":c.msgClass,name:"msgSpan"}).html(c.msg));f.append(g);c.target.addClass("tak-isLoading");c.target.append(f);return f}}};b.takLoading=function(){};b.takLoading.msg=function(b,c){var d=c.children('div[class\x3d"tak-loading-panel"]');0<d.length&&d.children("div").children('span[name\x3d"msgSpan"]').html(b)};b.takLoading.show=function(d,e){d=b.extend(!0,{},c,d);d.target=e;e.data("tak-loading-ved","1");var f=function(){if("1"==e.data("tak-loading-ved")){var b=_showDoubleRing(d);b&&0<b.length&&(b.data("tag",d.tag),e.data("tak-loading-ved","0"))}};f();"1"==e.data("tak-loading-ved")&&e.resize(f)};b.takLoading.hide=function(b){b.removeClass("tak-isLoading");b.data("tak-loading-ved","0");(b=b.children('div[class\x3d"tak-loading-panel"]').first())&&0<b.length&&b.remove()};b.takLoading.tag=function(b){if((b=b.children('div[class\x3d"tak-loading-panel"]').first())&&0<b.length)return b.data("tag")}})(jQuery);$.fn.extend({showTakLoading:function(b){$.takLoading.show(b,$(this));return this},msgTakLoading:function(b){$.takLoading.msg(b,$(this));return this},closeTakLoading:function(){$.takLoading.hide($(this));return this},getTakLoadingTag:function(){return $.takLoading.tag($(this))}});function takEventExt(){}defPlg(takEventExt,takTmpObj,"eves",{onInit:function(b){this.bindOwnerEv("subAddedId",this.bindSubTmp);this.bindOwnerEv("childCreatedId",this.bindChildTmp);this.loadEvent(b)},loadEvent:function(b){if(b){tak.iObj(b)&&(b=[b]);this.evesSubTmp||(this.evesSubTmp=[]);this.evesChildTmp||(this.evesChildTmp=[]);for(var c,d,e=0;e<b.length;e++)if(c=b[e],d=tak.gtn(c.on),"String"==d?c.on=[c.on]:"Array"!=d&&(c.on=null),c.on){for(var f=0;f<c.on.length;f++)d=c.on[f],"this"==d&&(this.bindEvFunc(c.en,c.func,this.owner),c.on.splice(f,1),f--);0<c.on.length&&("1"==c.isSub?this.evesSubTmp.push(c):this.evesChildTmp.push(c))}else this.bindEvFunc(c.en,c.func,this.owner)}},bindSubTmp:function(b,c){if(this.evesSubTmp&&tak.hStr(c.path))for(var d,e=0;e<this.evesSubTmp.length;e++)d=this.evesSubTmp[e],0<=d.on.indexOf(c.path)&&this.bindEvFunc(d.en,d.func,c.obj)},bindChildTmp:function(b,c){if(this.evesChildTmp&&tak.hStr(c.path))for(var d,e=0;e<this.evesChildTmp.length;e++)d=this.evesChildTmp[e],0<=d.on.indexOf(c.path)&&this.bindEvFunc(d.en,d.func,c.obj)},bindEvFunc:function(b,c,d,e){e||(e=this.owner.getFunc(c));tak.iFun(e)&&(d.bindEv(b,e,this.owner),d.bindEv("removed",function(b){this.owner.unBindEv(null,null,this)},this))}});function takTipExt(){}defPlg(takTipExt,takTmpObj,"tip",{onInit:function(b){tak.hStr(b)&&(this.btsTip=b);this.bindOwnerEv("rended",this.addTip)},addTip:function(b){if(this.btsTip){var c=this.btsTip;tak.hStr(c)&&(0==c.indexOf("$")?(c=c.substr(1,c.length-1),c=b.getFunc(c),c.call(b,this.setTip)):this.setTip(c,b))}},setTip:function(b,c){c.baseJqo.attr("data-toggle","tooltip");c.baseJqo.attr("title",b)}});var takInitOpt=function(b){b.initOpt={pageTmp:{None:{baseV:{type:"takView",loadingOn:"1"}}},defOpt:{state:"view"},tmpLoader:new defTmpLd,loading:function(b,d,e){1==e?b.showTakLoading({panelSize:60,RingRadius:20,StrokeWidth:1,msgRight:"1",backColor:"rgba(1,1,1,0.5)",msg:d,boxClass:"tak-isLoading-box",msgClass:"tak-isLoading-msg"}):b.showTakLoading({RingRadius:40,msg:d,boxClass:"tak-isLoading-box-n"})},showMsg:function(b,d){b.msgTakLoading(d)},loaded:function(b){b.closeTakLoading()},alert:function(b,d,e){alert(d+"\n"+e)},confirm:function(b,d,e,f){1==confirm(d+"\n"+e)&&f()}}};$.takApp=(new takApp).init(null,{});$.fn.extend({takPageShow:function(b){return $.takApp.showPage(b,$(this))},rendTakView:function(b){tak.ckTN(b,HtmlV)?this.append(b.baseJqo):tak.ckTN(b,takCtrl)?this.append(b.baseV.baseJqo):tak.ckTN(b,jQuery)&&this.append(b)}});